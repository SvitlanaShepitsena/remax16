"use strict";!function(){angular.module("app",["ngAnimate","angular-capitalize-filter","ngCookies","ngMaterial","ngMessages","ngSanitize","toastr","pascalprecht.translate","ui.router","firebase","ngFileUpload","lumx","textAngular","brokers","angular-input-stars","auth","search","listings","ad","auth.user","auth.manager","customers","auth.notifications","ad.promotion","article","common","sections.header","sections.about","sections.home","sections.contact","sections.privacy","sections.terms","ngImgCrop","angular-flexslider","ezfb","ngMap","LocalStorageModule"]).config(["localStorageServiceProvider",function(e){e.setPrefix("remax")}]).config(["ezfbProvider",function(e){e.setInitParams({appId:"781844735261747",version:"v2.3"})}]).config(["$mdThemingProvider","$mdIconProvider","$compileProvider",function(e,t,n){n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|mms):/),e.theme("default").primaryPalette("blue").accentPalette("red")}]).config(["$sceProvider","$translateProvider",function(e,t){t.useSanitizeValueStrategy(null),t.useCookieStorage()}]).config(["$httpProvider","$locationProvider","$urlRouterProvider","$urlMatcherFactoryProvider",function(e,t,n,r){r.strictMode(!1),n.rule(function(e,t){var n=t.path(),r=t.search(),o=n[n.length-1];if("/"!==o){if(r==={}){var i=n+"/";return console.log(i),i}var a=[];return angular.forEach(r,function(e,t){a.push(t+"="+e)}),n+"/?"+a.join("&")}}),t.html5Mode(!0).hashPrefix("!")}]).factory("$exceptionHandler",["$injector",function(e){return function(t,n){var r=e.get("$rootScope"),o=e.get("toastr");throw t.message=t.stack,o.error("ERROR!"+t.message),r.$broadcast("error"),t}}]).config(["$compileProvider",function(e){}])}(),function(){angular.module("app").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,n){e.state("app",{"abstract":!0,controller:"AppCtrl as app",resolve:{userPromise:["AuthenticationServ",function(e){return e.checkUserStatus()}]},template:"<div ui-view=''></div>"}).state("app.home",{url:"/",controller:"HomeCtrl as home",templateUrl:"scripts/sections/home/views/homeCtrl.html"}).state("app.sign-up",{url:"/sign-up",controller:"SignUpCtrl as signUp",templateUrl:"scripts/auth/views/sign-upCtrl.html",resolve:{currentUser:["userAuth","$q",function(e,t){return t(function(t,n){var r=!!e.profile;r?n("You are already logged in. Logout First"):t()})}]}}).state("app.login",{url:"/login/*credentials?",controller:"LoginCtrl as login",templateUrl:"scripts/auth/views/loginCtrl.html"}).state("app.y",{url:"/y",controller:"YCtrl as y",templateUrl:"ad/classified/views/yCtrl.html"})}])}(),function(){angular.module("sections.home",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){angular.module("listings",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.user.listings",{url:"/listings",controller:"UserListingsCtrl",templateUrl:"scripts/auth/user/views/user-listingsCtrl.html"}).state("app.user.listings.one",{url:"/:mls",resolve:{listing:["SearchSaleServ","$stateParams",function(e,t){var n=t.mls;return e.getHome(n)}]},controller:"OneUserListingCtrl",templateUrl:"scripts/listings/views/one-user-listingCtrl.html"}).state("app.user.listings.one.edit",{url:"/edit",controller:"UserListingEditCtrl",templateUrl:"scripts/listings/views/user-listing-editCtrl.html"}).state("app.user.create-listing",{url:"/create-listing",controller:"CreateListingCtrl",templateUrl:"scripts/listings/views/create-listingCtrl.html"})}])}(),function(){angular.module("listings").directive("svBookmark",["BookmarkServ","$state",function(e,t){return{replace:!0,templateUrl:"scripts/listings/directives/sv-bookmark.html",scope:{home:"=",bookmarks:"="},link:function(n,r,o){n.bookmarks?n.bookmarked=n.bookmarks?n.bookmarks.indexOf(n.home.$id)>-1:!1:e.getAuthUserBookmarks().then(function(e){n.bookmarks=_.pluck(e,"$id"),n.bookmarked=n.bookmarks?n.bookmarks.indexOf(n.home.$id)>-1:!1}),n.addToBookmarks=function(t){e.add(t).then(function(){n.bookmarked=!0})},n.removeFromBookmarks=function(r){var o=t.current.name.indexOf("bookmarks")>-1;e.remove(r,o).then(function(){n.bookmarked=!1})}}}}])}(),function(){angular.module("listings").factory("BookmarkServ",["$q","url","$rootScope","toastr","$state","users","$firebaseObject","$firebaseArray","FbGenServ","userAuth",function(e,t,n,r,o,i,a,s,c,u){return{add:function(n){var i=this;return e(function(e,a){if(!u.profile)return r.warning("Please login to save home to bookmarks",{timeout:1e4}),void o.go("app.login");var s=t+"bookmarks/"+u.profile.userName+"/",l={};l[n]=!0,c.saveObject(s,l).then(function(t){i.addSubs().then(function(){e()})})})},remove:function(i,a){return e(function(e,s){if(!u.profile)return r.warning("Please login to save home to bookmarks",{timeout:1e4}),void o.go("app.login");var l=t+"bookmarks/"+u.profile.userName+"/",f={};f[i]=!0,c.removeObj(l,f).then(function(t){a&&n.$broadcast("bookmark:deleted",i),e()})})},getAuthUserBookmarks:function(){return e(function(e,n){if(u.profile){var r=t+"bookmarks/"+u.profile.userName,o=s(new Firebase(r));o.$loaded().then(function(){e(o)})}else n()})},addSubs:function(){return e(function(e,n){if(u.profile){var r=t+"subscriptions/"+u.profile.userName,o=a(new Firebase(r));o.$loaded().then(function(t){t.bookmarks!==!1?(o.bookmarks=!0,o.$save().then(function(){e()})):e()})}else e()})}}}])}(),function(){angular.module("listings").directive("svSearchInputContent",["$rootScope","$location","QueryServ",function(e,t,n){return{replace:!0,templateUrl:"scripts/listings/directives/sv-search-input-content.html",scope:{},link:function(r,o,i){var a=t.$$path;r.isRent=a.indexOf("rent")>-1,e.$watch("hmCnt",function(e,t){if(e){for(var o=0,i=0,a=0;a<e.length;a++){var s=e[a];s.distance?i++:o++}if(r.cnt=o,r.cntNearBy=i,0===o&&0===i){var c=n.getString();r.emptyNotice="No results found for "+c,r.emptyNoticeInput="0 listings found"}}})}}}])}(),function(){angular.module("listings").directive("svFormPhotos",function(){return{replace:!0,templateUrl:"scripts/listings/directives/sv-form-photos.html",link:function(e,t,n){e.$watchCollection("listing.images",function(t,n){t&&(e.orderedImages=_.map(t,function(e,t){return{url:e,order:t+1}}))}),e.removeOrderedImage=function(t){for(var n=0;n<e.listing.images.length;n++){var r=e.listing.images[n];if(r==t.url){e.listing.images.splice(n,1),e.listingForm.$pristine=!1;break}}}}}})}(),function(){angular.module("listings").controller("UserListingEditCtrl",["$scope","listing",function(e,t){e.listing=t}])}(),function(){angular.module("listings").directive("svSearchStat",["$rootScope","$location","QueryServ","$state",function(e,t,n,r){return{templateUrl:"scripts/listings/directives/sv-search-stat.html",link:function(o,i,a){o.isBookMarkState=r.current.name.indexOf("bookmarks")>-1;var s=t.$$path;o.isRent=s.indexOf("rent")>-1,e.$watch("hmCnt",function(e,t){if(e){for(var r=0,i=0,a=0;a<e.length;a++){var s=e[a];s.distance?i++:r++}if(o.cnt=r,o.cntNearBy=i,0===r&&0===i){var c=n.getString();o.emptyNotice="No results found for "+c}}})}}}])}(),function(){angular.module("listings").factory("SortServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){return{sort:function(e,t){switch(t){case"daysOnSite":e=_.sortBy(e,function(e){return parseInt(e.daysOnSite)});break;case"priceLow":e=_.sortBy(e,function(e){return parseInt(e.price)});break;case"priceHigh":e=_.sortBy(e,function(e){return-parseInt(e.price)})}return e}}}])}(),function(){angular.module("listings").controller("OneRemaxListingCtrl",["$scope","$stateParams","SearchSaleServ","$state",function(e,t,n,r){e.isRent=r.current.name.indexOf("rent")>-1,n.getHome(t.mls,e.isRent).then(function(t){e.listing=t})}])}(),function(){function e(e){var t=e.markerClusterer.clusters_;if(0!==t.length){for(var n=[],r=0;r<t.length;r++){var o=t[r];if(o.markers_)for(var i=0;i<o.markers_.length;i++){var a=o.markers_[i];n.push(a)}}e.shPoses=[];for(var r=0;r<e.positions.length;r++){var s=e.positions[r];if(s){for(var c=!1,i=0;i<n.length;i++){var u=n[i];if(s.id==u.id){c=!0;break}}c||e.shPoses.push(s)}}}}function t(t,n){t(function(){e(n)},400)}function n(e,t){var n;switch(e.type){case"Single Family Home":n=t.sHome;break;case"Multi-Family Home":n=t.mHome;break;case"Townhouse":n=t.townhouse;break;case"Duplex":n=t.duplex;break;case"Condominium Unit":n=t.condo;break;case"Raw Land":n=t.land;break;default:n=t.sHome}return n}angular.module("listings").directive("svListingsList",["toastr","homesUrl","avatarBroker","userAuth","url","FbGenServ","mapStyler","icon","$rootScope","googleMap","QueryServ","$timeout","$stateParams","SearchSaleServ","GeoServ","$window","localStorageService","$filter","defaultImage","SortServ",function(r,o,i,a,s,c,u,l,f,m,d,p,v,g,h,b,k,w,y,S){function C(e,t){var n=new google.maps.LatLngBounds;e.forEach(function(e){e&&e.position&&n.extend(e.position)}),3===e.length?(t.map.fitBounds(n),t.map.setZoom(10)):t.map.fitBounds(n)}return{replace:!0,templateUrl:"scripts/listings/directives/sv-listings-list.html",controller:["$scope",function(e){e.mapStyler=u,this.getHomes=function(){return e.homes}}],scope:{bookmarks:"="},link:function(u,h,U){if(u.underBrokers=f.underBrokers,u.isBroker=v.id,u.avatarBroker=i,u.isRent=d.isRent(),u.sortBy=k.get("sortBy")||"daysOnSite",u.$on("sort:homes",function(e,t){u.homes=S.sort(u.homes,t)}),u.boundsChanged=function(){console.log("changed")},u.mapStyle={height:Math.floor(.8*b.innerHeight)+"px"},u.isBroker)u.mapView="grid";else{var A=k.get("mapView");u.mapView=!(!A||"grid"==A)}u.googleMap=m,u.googleMapsUrl="http://maps.google.com/maps/api/js?key=AIzaSyAoZAEJhhT8_oquhNjmpdNvLgbvlCbeSAc",u.iconBase="https://maps.google.com/mapfiles/kml/shapes/";u.$on("mapInitialized",function(e,t){u.map=t}),u.$on("mapGrid:changed",function(e,t){u.mapView=t}),g.getHomes(v,u.isBroker,u.bookmarks).then(function(e){if(a.profile){var t=s+"bookmarks/"+a.profile.userName;c.getAssync(t).then(function(e){u.bookmarks=_.pluck(e,"$id")})}u.$on("bookmark:deleted",function(e,t){for(var n=0;n<u.homes.length;n++){var r=u.homes[n];if(r.$id===t){u.homes.splice(n,1);break}}}),u.avatarBroker=i,f.hmCnt=e,e&&0!==e.length||(f.$broadcast("hide:listing:list"),p(function(){u.map&&(u.map.setCenter(new google.maps.LatLng(42.008871225891134,-87.93649894999999)),u.map.setZoom(9))},700)),u.homes=S.sort(e,u.sortBy),u.infoWindowMap=new Map,u.positions=_.map(u.homes,function(e){function t(e){var t=e.getMap();return null!==t&&"undefined"!=typeof t}var s=e.geo;if(s){var f=new google.maps.LatLng(s.lat,s.lng),m=new google.maps.Marker({position:f,icon:n(e,l)});m.id=e.$id;var d=e.images?e.images[0]:y,v=(e.isRent?"homes-for-rent/":"homes-for-sale/")+e.mls+"/",g=a.profile&&a.profile.brokerId===e.agent;return u.infoWindowMap.set(m.id,new google.maps.InfoWindow({content:'\n                                <div style="margin-bottom:4px">\n                                    <div class="map-pointer-text-wrapper" style="padding-top: 5px;">\n                                        <a href="'+v+'" target="_blank">\n                                            <div class="i-map-wrapper-style" style="vertical-align: top">\n                                                <i style="background-image:url(\''+d+'\')" class="i-map-style"></i>\n                                             </div>\n                                        </a>\n                                    </div>\n                                    <div class="map-pointer-text-wrapper" style="vertical-align: top;">\n                                        <a href="'+v+'" style="text-decoration:none" target="_blank">\n                                            <div style="font-size:15px;font-weight:600;color:#1e88e5">'+w("currency")(e.price,"$",0)+" </div>\n                                            <div >\n                                                <span>For "+(e.isRent?"Rent":"Sale")+'</span>\n\n                                                <span style="font-size:12px;color:#393939"> '+e.type+'</span>\n\n                                            </div>\n                                            <div style="font-weight:500;color:#393939">'+e.address.city+","+e.address.zip+'</div>\n                                            <div style="font-weight:500;color:#393939">'+e.address.street+'</div>\n                                            <div style="font-size:12px;color:#696969;font-weight:500">\n                                                <span style="font-weight:500" ng-if="home.beds">\n                                                    <i class=\'fa fa-circle\' style="font-size: 8px"></i>\n                                                    &nbsp\n                                                    Beds:\n                                                </span>\n                                                <span>\n                                                    '+("n/a"!=e.beds?e.beds:"")+'\n                                                    &nbsp\n                                                </span>\n                                                <span style="font-weight:500" ng-if="home.bath">\n                                                    <i class=\'fa fa-circle\' style="font-size: 8px"></i>\n                                                    &nbsp\n                                                    Baths:\n                                                </span>\n                                                <span>\n                                                    '+("n/a"!=e.bath?e.bath:"")+'\n                                                </span>\n                                             </div>\n                                        </a>\n                                    </div>\n                                </div>\n                                <hr/>\n\n                                <a href="/brokers/'+e.agent+'/profile" style="text-decoration:none">\n                                <img style="display:inline-block; vertical-align: middle;width:28px;margin-top:8px" src="'+(e.agentObj.pic||i)+' " alt="">\n                                <div style="display:inline-block;vertical-align: middle;font-weight:500">\n                                   '+e.agentObj.fName+" "+e.agentObj.lName+'\n                                </div>\n                                <div style="display:inline-block;float: right">\n                                  <div style="margin-top:8px;">\n                                      <i class="fa fa-phone"></i>\n                                      (847) 674-9797\n                                  </div>\n                                </div>\n                                </a>\n\n                                  '+(g?'<div><button style="margin: 3px;" type="button" class="btn btn--s btn--blue btn--raised" id="savePov">Save View</button></div>':"")+"\n\n                                    "+(s.pano?'<div id="pano" style="width:400px;height:200px"></div>':"")+"\n							 "})),u.deaf=!1,m.addListener("mouseover",function(){if(!u.deaf&&u.activeMarkerId!=m.id){u.deaf=!0;var n=u.infoWindowMap.get(m.id);if(u.infoWindowMap.forEach(function(e){e!=n?e.close():t(e)||(e.open(u.map,m),google.maps.event.addListener(e,"closeclick",function(){u.activeMarkerId=0}),u.activeMarkerId=m.id)}),p(function(){u.deaf=!1},800),s.pano){var i=new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:s.pano,fullScreenControl:!1,addressControl:!1});google.maps.event.addListenerOnce(i,"status_changed",function(){var t=i.getLocation();if(t){var n={};if(e.geo.pano.pov)n=e.geo.pano.pov;else{var r=google.maps.geometry.spherical.computeHeading(t.latLng,f);n.pitch=0,n.heading=r}i.setPov(n)}else i.setVisible(!1)}),g&&($("#savePov").on("click",function(){var t=u.newPos.lat(),n=u.newPos.lng(),i={lat:t,lng:n};i.pov=u.newPov;var a=e.isRent?"rent":"sale",s=o+a+"/"+e.$id+"/geo/pano";c.removeObj(s).then(function(){c.saveObject(s,i).then(function(){r.success("new view saved")})}),console.log(i)}),i.addListener("position_changed",function(){u.newPos=i.getPosition()}),i.addListener("pov_changed",function(){u.newPov=i.getPov()}))}}}),m}})}),u.$watch("positions",function(e,n){e&&(u.map?(u.markerClusterer=new MarkerClusterer(u.map,_.compact(u.positions),{maxZoom:12}),C(e,u),t(p,u)):u.$on("mapInitialized",function(n,r){u.map=u.map||r,u.markerClusterer=new MarkerClusterer(u.map,_.compact(u.positions),{maxZoom:12}),C(e,u),t(p,u)}))}),u.zoomChanged=function(){u.clustersBuilt&&p(function(){e(u)},400)}}}}])}(),function(){angular.module("listings").directive("svProfileListingThumb",["$state",function(e){return{replace:!0,templateUrl:"scripts/listings/directives/sv-profile-listing-thumb.html",scope:{home:"="},link:function(t,n,r){t.$state=e}}}])}(),function(){angular.module("listings").directive("svFormUtilities",function(){return{replace:!0,templateUrl:"scripts/listings/directives/sv-form-utilities.html",link:function(e,t,n){e.listing=e.listing||{}}}})}(),function(){angular.module("listings").directive("svFormExterior",function(){return{replace:!0,templateUrl:"scripts/listings/directives/sv-form-exterior.html",link:function(e,t,n){e.listing=e.listing||{}}}})}(),function(){angular.module("listings").directive("svFormPublicFacts",function(){return{replace:!0,templateUrl:"scripts/listings/directives/sv-form-public-facts.html",link:function(e,t,n){e.listing=e.listing||{}}}})}(),function(){angular.module("listings").directive("svFormTaxes",function(){return{replace:!0,templateUrl:"scripts/listings/directives/sv-form-taxes.html",link:function(e,t,n){e.listing=e.listing||{}}}})}(),function(){angular.module("listings").directive("svFormDescription",function(){return{replace:!0,templateUrl:"scripts/listings/directives/sv-form-description.html",link:function(e,t,n){e.listing=e.listing||{}}}})}(),function(){angular.module("listings").directive("svFormInterior",function(){return{replace:!0,templateUrl:"scripts/listings/directives/sv-form-interior.html",link:function(e,t,n){}}})}(),function(){angular.module("listings").directive("svFormInfo",function(){return{replace:!0,templateUrl:"scripts/listings/directives/sv-form-info.html",link:function(e,t,n){e.listing=e.listing||{},e.listing.status="active"}}})}(),function(){angular.module("listings").directive("svListingStatus",function(){return{replace:!0,templateUrl:"scripts/listings/directives/sv-listing-status.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("listings").directive("svNewListingForm",["localStorageService","FbGenServ","homesUrl","toastr",function(e,t,n,r){return{replace:!0,templateUrl:"scripts/listings/directives/sv-new-listing-form.html",scope:{listing:"="},link:function(o,i,a){o.listingTabIndex=e.get("listingTabIndex")||0,o.switchTab=function(t){e.set("listingTabIndex",t-1)},o.saveListing=function(e){t.saveObject(n+e.mls,e).then(function(e){r.success("Changes have been saved")})}}}}])}(),function(){angular.module("listings").controller("CreateListingCtrl",["$scope",function(e){}])}(),function(){angular.module("listings").directive("svCreateListingBtn",function(){return{replace:!0,templateUrl:"scripts/listings/directives/sv-create-listing-btn.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("listings").directive("svListingBroker",["userAuth","companyPhone",function(e,t){return{replace:!0,templateUrl:"scripts/listings/directives/sv-listing-broker.html",link:function(e,n,r){var o=e.home.agentObj.defaultTel,i=o?"phone"+o:null;i?e.contactPhone=e.home.agentObj[i]:e.contactPhone=t}}}])}(),function(){angular.module("listings").directive("svListingFull",["avatarBroker","maps","googleMap","$mdDialog","defaultImage",function(e,t,n,r,o){function i(e){var t="";for(var n in e)t+=e[n]+" ";return t.trim()}return{replace:!0,templateUrl:"scripts/listings/directives/sv-listing-full.html",scope:{home:"="},link:function(a,s,c){function u(e,t,n){n.feedback&&(e.feedback=n.feedback),e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}a.defaultImage=o,a.showListingGalleryModal=function(){r.show({controller:u,templateUrl:"scripts/listings/views/modalListingGallery.html"})},u.$inject=["$scope","$mdDialog","feedbackConst"],a.avatarBroker=e,a.maps=t,a.googleMap=n,a.fullAddress=t+i(a.home.address)}}}])}(),function(){angular.module("listings").directive("svListingThumb",["$rootScope","$state","avatarBroker","maps","googleMap","userAuth","toastr","FbGenServ","url","BookmarkServ",function(e,t,n,r,o,i,a,s,c,u){function l(e){var t="";for(var n in e)t+=e[n]+" ";return t.trim()}return{replace:!0,templateUrl:"scripts/listings/directives/sv-listing-thumb.html",scope:{home:"=",bookmarks:"="},link:function(e,t,i){e.avatarBroker=n,e.maps=r,e.googleMap=o,e.fullAddress=r+l(e.home.address)}}}])}(),function(){angular.module("listings").controller("OneUserListingCtrl",["$scope","listing",function(e,t){e.listing=t}])}(),function(){angular.module("search",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.search",{url:"/search/*params",controller:"SearchResultsCtrl",templateUrl:"scripts/search/views/search-resultsCtrl.html"}).state("app.one-listing-sale",{url:"/homes-for-sale/:mls",controller:"OneRemaxListingCtrl",templateUrl:"scripts/listings/views/one-remax-listingCtrl.html"}).state("app.one-listing-rent",{url:"/homes-for-rent/:mls",controller:"OneRemaxListingCtrl",templateUrl:"scripts/listings/views/one-remax-listingCtrl.html"})}])}(),function(){angular.module("search").controller("SearchResultsCtrl",["$scope","$stateParams","SearchSaleServ","GeoServ",function(e,t,n,r){}])}(),function(){angular.module("search").factory("BoundariesServ",["$q","$http","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o,i){return{get:function(){return e(function(e,n){var r=NaN;t.jsonp(r,{"Content-Type":"application/json"}).success(function(e){console.log(e)})})}}}])}(),function(){angular.module("search").factory("NearestListingsServ",["$q","distanceToNearest","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o,i){function a(e){if(e.lat)return new google.maps.LatLng(e.lat,e.lng);var t=e.geometry.location;return new google.maps.LatLng(t.lat(),t.lng())}return{find:function(n,r){return e(function(e,o){var i=new google.maps.Geocoder,s=[];i.geocode({address:n},function(n,o){if("OK"==o){for(var i=n[0],c=a(i),u=0;u<r.length;u++){var l=r[u],f=a(l.geo),m=google.maps.geometry.spherical.computeDistanceBetween(c,f);l.distance=m,t>=m&&s.push(l)}if(s.length)e(_.sortBy(s,m));else{var d=_.sortBy(r,"distance");e(_.take(d,1))}}})})}}}])}(),function(){angular.module("search").directive("svAutoComplete",function(){return{require:"?^ngModel",link:function(e,t,n,r){}}})}(),function(){angular.module("search").directive("svSidenavSearch",["QueryServ","$rootScope","homesUrl","AgentServ","$location","UrlSeoConvertorServ","FbGenServ","SearchSaleServ","defaultImage","avatarBroker","$state","$mdSidenav",function(e,t,n,r,o,i,a,s,c,u,l,f){function m(e){var t=_.map(e,function(e){var t=e.$id.trim();return{value:t.toLowerCase(),display:_.capitalize(t)}});return t}return{replace:!0,templateUrl:"scripts/search/directives/sv-sidenav-search.html",scope:{},link:function(o,s,d){t.$watch("hmCnt",function(e,n){e&&(t.cnt={n:e})}),o.typed=function(){o.cities=o.citiesHidden},t.$on("submit:form",function(){o.runSearch(o.query)});var p;o.$watch("query.saleRent",function(e,t){if(o.types&&e&&"sale"==e&&p){var n=[];n.push(o.types[0]),n.push(p),n=_.union(n,_.rest(o.types,2)),o.types=n}o.types&&e&&"rent"==e&&(p=_.pullAt(o.types,1)[0])}),o.$on("query:changed",function(t,n){o.query=e.get()}),o.query=e.get(),o.isIe=r.isIe(),o.toggleLeft=function(){f("left").toggle()},o.listing={},o.defImage=c,o.avatarBroker=u,o.selectType=function(e){o.selectedType=e.$value},o.getAutoLoads=function(){a.getAssync(n+"autocomplete").then(function(e){o.citiesHidden=m(e)})}(),o.getTypes=function(){return a.getAssync(n+"types").then(function(e){o.types=e})},o.getTypes();o.searchTextChange=function(e){},o.querySearch=function(e){var t;t=$("md-virtual-repeat-container");var n=_.filter(o.cities,function(t){return _.startsWith(t.value,e.toLowerCase())});if(e&&!n.length){t.hide()}else t.show();return n},o.toggle=function(e,t){var n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e)},o.exists=function(e,t){return t.indexOf(e)>-1},o.runSearch=function(t){var n=i.parse(t);n.length?(e.set(t),l.go("app.search",{params:n},{reload:!1}),f("left").close()):l.go("app.search",{params:"all-homes-for-sale"})}}}}])}(),function(){angular.module("search").directive("svTopSearchPanel",["$state","localStorageService","$rootScope",function(e,t,n){return{replace:!0,templateUrl:"scripts/search/directives/sv-top-search-panel.html",link:function(r,o,i){r.isBookMarkState=e.current.name.indexOf("bookmarks")>-1,r.changeMapGridView=function(e){e?t.set("mapView","map"):t.set("mapView","grid"),n.$broadcast("mapGrid:changed",e)}}}}])}(),function(){angular.module("search").directive("svSearchHeaderNavLink",function(){return{replace:!0,templateUrl:"scripts/search/directives/sv-search-header-nav-link.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("search").directive("svSortListings",["localStorageService",function(e){return{replace:!0,templateUrl:"scripts/search/directives/sv-sort-listings.html",scope:{sortBy:"=",homes:"="},link:function(t,n,r){t.$watch("sortBy",function(n,r){n&&(e.set("sortBy",n),t.$emit("sort:homes",n))})}}}])}(),function(){angular.module("search").directive("svSearchFormCell",["AgentServ","homesUrl","$location","UrlSeoConvertorServ","FbGenServ","SearchSaleServ","defaultImage","avatarBroker","$state",function(e,t,n,r,o,i,a,s,c){function u(e){var t=_.map(e,function(e){var t=e.$id.trim();return{value:t.toLowerCase(),display:t}});return t}return{replace:!0,templateUrl:"scripts/search/directives/sv-search-form-cell.html",scope:{},link:function(e,n,i){e.listing={},e.defImage=a,e.avatarBroker=s,e.selectType=function(t){e.selectedType=t.$value},e.getAutoLoads=function(){o.getAssync(t+"autocomplete").then(function(t){e.cities=u(t)})}(),e.getTypes=function(){return o.getAssync(t+"types").then(function(t){e.types=t,console.log(t)})},e.getTypes();e.searchTextChange=function(e){},e.querySearch=function(t){var n;n=$("md-virtual-repeat-container");var r=_.filter(e.cities,function(e){return _.startsWith(e.value,t.toLowerCase())});if(t&&!r.length){n.hide()}else n.show();return r},e.runSearch=function(e){var t=r.parse(e);t.length?c.go("app.search",{params:t}):c.go("app.search",{params:"all-homes-for-sale"})}}}}])}(),function(){angular.module("search").directive("svLxDropdown",["localStorageService","$mdMedia",function(e,t){return{priority:100,require:"^lxDropdown",link:function(n,r,o,i){"map"===e.get("mapView"),n.$on("mapGrid:changed",function(e,t){n.sm||(t?i.open():i.close())}),n.$watch(function(){return t("sm")},function(e){n.sm=e,e&&i.close()}),r.on("click",function(e){i.isOpened?i.close():i.open(),e.stopPropagation(),e.preventDefault()})}}}])}(),function(){angular.module("search").directive("svSearchDropdown",["QueryServ","$rootScope","homesUrl","AgentServ","$location","UrlSeoConvertorServ","FbGenServ","SearchSaleServ","defaultImage","$mdMedia","avatarBroker","$state","$mdSidenav",function(e,t,n,r,o,i,a,s,c,u,l,f,m){function d(e){var t=_.map(e,function(e){var t=e.$id.trim();return{value:t.toLowerCase(),display:_.capitalize(t)}});return t}return{replace:!0,templateUrl:"scripts/search/directives/sv-search-dropdown.html",scope:{},link:function(r,o,s){t.$watch("hmCnt",function(e,n){e&&(t.cnt={n:e})}),r.typed=function(){r.cities=r.citiesHidden},t.$on("submit:form",function(){r.runSearch(r.query)});var u;r.$watch("query.saleRent",function(e,t){if(r.types&&e&&"sale"==e&&u){var n=[];n.push(r.types[0]),n.push(u),n=_.union(n,_.rest(r.types,2)),r.types=n}r.types&&e&&"rent"==e&&(u=_.pullAt(r.types,1)[0])}),r.$on("query:changed",function(t,n){r.query=e.get()}),r.query=e.get(),r.listing={},r.defImage=c,r.avatarBroker=l,r.selectType=function(e){r.selectedType=e.$value},r.getAutoLoads=function(){a.getAssync(n+"autocomplete").then(function(e){r.citiesHidden=d(e)})}(),r.getTypes=function(){return a.getAssync(n+"types").then(function(e){r.types=e})},r.getTypes();r.searchTextChange=function(e){},r.querySearch=function(e){var t;t=$("md-virtual-repeat-container");var n=_.filter(r.cities,function(t){return _.startsWith(t.value,e.toLowerCase())});if(e&&!n.length){t.hide()}else t.show();return n},r.toggle=function(e,t){var n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e)},r.exists=function(e,t){return t.indexOf(e)>-1},r.runSearch=function(t){var n=i.parse(t);n.length?(e.set(t),f.go("app.search",{params:n},{reload:!1})):f.go("app.search",{params:"all-homes-for-sale"})}}}}])}(),function(){angular.module("search").factory("GeoServ",["$q","GeoCoder","url","users","$firebaseObject","$firebaseArray","$timeout",function(e,t,n,r,o,i,a){return{translate:function(n){return e(function(r,o){function i(n){if(u.length===c.length||10===u.length)return void e.all(u).then(function(e){r(e)})["catch"](function(e){console.log(e),a(function(){if(l>2)o("Limit Err");else{l++;var e=n+1;i(e)}},4e3)});var s=c[n];console.log(s),u.push(t.geocode({address:s}));var f=n+1;!function(e){a(function(){i(e)},10)}(f)}var s=_.pluck(n,"address"),c=s.map(function(e){var t=e.street+","+e.city.trim()+","+e.state+","+e.zip;return t}),u=[],l=0;i(0)})}}}])}(),function(){angular.module("search").directive("svCityTabs",["$mdDialog","$state",function(e,t){return{replace:!0,templateUrl:"scripts/search/directives/sv-city-tabs.html",scope:{home:"="},link:function(e,n,r){var o=t.current.name;o&&_.contains(o,"about2")&&(e.selectedIndex=1)}}}])}(),function(){angular.module("search").factory("UrlSeoConvertorServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){return{parse:function(e){var t,n="";for(var r in e)t=e[r],_.isArray(t)&&(t=t.join("-")),"saleRent"!=r?t&&"any"!==t.toLowerCase()&&(t=t.replace(/\s{2,}/g," ").trim(),r=_.snakeCase(r),r=r.replace("_","-"),t=t.replace(/-/g,"~"),t=t.replace(/\s+/g,"-"),t=t.replace("/","&"),t.length&&(n+="/"+r+"/",n+=t)):n+="sale"===t?"/homes-for-sale":"/homes-for-rent";return n.toLowerCase().slice(1)}}}])}(),function(){angular.module("search").factory("GetAgentsInfoServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){function i(){return e(function(e,t){c.$loaded().then(function(t){e(t)})})["catch"](function(e){console.log(e),reject(e)})}function a(e,t){if(_.isObject(e))return e;var n=_.findWhere(t,{$id:e});return n=_.omit(n,function(e,t){return"$"===t[0]})}var s=t+"homes/agents/",c=o(new Firebase(s));return{get:function(t){return e(function(e,n){i().then(function(n){for(var r=_.toArray(n),o=0;o<t.length;o++){var i=t[o];i.agentObj=a(i.agent,r)}e(t)})})},getByEmail:function(t){return e(function(e,n){i().then(function(n){n.forEach(function(n){n.email&&n.email===t&&e(n)}),e(null)})})},getByKey:function(t){return e(function(e,n){var o=r(new Firebase(s+t));o.$loaded().then(function(t){e(t)})})}}}])}(),function(){angular.module("search").factory("SearchFilterServ",["$q","url","users","$firebaseObject","$firebaseArray","UrlSeoConvertorServ",function(e,t,n,r,o,i){function a(e,t){return e=e.trim(),e.toLowerCase().indexOf(t.toLowerCase())>-1}return{byAddress:function(e,t){if(!t)return e;for(var n=[],r=[],o=0;o<e.length;o++){var i=e[o];r=t.split(" ");for(var s=0;s<r.length;s++){var c=r[s];a(i.address.city,c)?n.push(i):a(i.address.zip,c)?n.push(i):a(i.address.state,c)&&n.push(i)}}return n},byMaxPrice:function(e,t){if(!t)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];if(o.price)try{var i=parseInt(o.price),a=parseInt(t);a>=i&&n.push(o)}catch(s){continue}else n.push(o)}return n},byMinBeds:function(e,t){if(!t)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];if(o.beds&&"n\\a"!==o.beds)try{var i=parseInt(o.beds),a=parseInt(t);i>=a&&n.push(o)}catch(s){continue}else n.push(o)}return n},byBedrooms:function(e,t){if(!t)return e;for(var n=t.split("-").map(function(e){return parseInt(e);
}),r=_.max(n),o=[],i=0;i<e.length;i++){var a=e[i];if(a.beds&&"n\\a"!==a.beds)try{var s=parseInt(a.beds);(isNaN(s)||n.indexOf(s)>-1||4===r&&s>=4)&&o.push(a)}catch(c){continue}else o.push(a)}return o},byType:function(e,t){if(!t||"Any"===t)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];a(o.type,t)&&n.push(o)}return n}}}])}(),function(){angular.module("search").factory("SearchSaleServ",["NearestListingsServ","GetAgentsInfoServ","QueryServ","SearchFilterServ","$rootScope","userAuth","$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o,i,a,s,c,u,l){var f=s+"homes/sale/",m=l(new Firebase(f)),d=s+"homes/rent/",p=l(new Firebase(d));return{getBrokerHomes:function(e,n){return a(function(r,o){n?t.getByKey(n).then(function(e){if(e){var o=n;m.$loaded().then(function(e){var n=[];e.forEach(function(e,t){(e.agent==o||e.agent.$id&&e.agent.$id==t)&&n.push(e)}),t.get(n).then(function(e){r(e)})})}}):t.getByEmail(e).then(function(n){if(n){var o=n.fName.toLowerCase()+"_"+n.lName.toLowerCase();m.$loaded().then(function(n){var i=[];n.forEach(function(t,n){(t.agent===o||t.agent.email&&t.agent.email==e)&&i.push(t)}),t.get(i).then(function(e){r(e)})})}})})},getHomes:function(i,s,c){if(c)return this.getHomesByBookMarks(c);var u=this;return a(function(a,c){if(s)u.getBrokerHomes(null,s).then(function(e){a(e)});else{var l;l=i.params.indexOf("rent")>-1?p:m;var f={};if(i)var d=_.compact(i.params.split("/"));l.$loaded().then(function(i){var s=d.indexOf("homes-for-rent");f.saleRent=s>-1?"rent":"sale";var c=d.indexOf("address"),u=d.indexOf("max-price"),m=d.indexOf("bedrooms"),p=d.indexOf("type");if(c>-1){var v=d[c+1];f.address=v.replace(/\s+/g," "),f.address=v.replace(/-+/g," "),i=r.byAddress(i,f.address)}if(u>-1){var g=d[u+1];f.maxPrice=g,i=r.byMaxPrice(i,g)}if(m>-1){var h=d[m+1];f.bedrooms=h.split("-").map(function(e){return parseInt(e)}),i=r.byBedrooms(i,h)}if(p>-1){var b=d[p+1];b=b.replace(/&+/g,"/"),b=b.replace(/-+/g," "),b=b.replace(/~+/g,"-"),f.type=b,i=r.byType(i,b)}n.set(f),o.$broadcast("query:changed",f),0===i.length&&f.address?e.find(f.address,l).then(function(e){t.get(e).then(function(e){a(e)})}):(i=_.map(i,function(e){return _.omit(e,"distance")}),t.get(i).then(function(e){a(e)}))})["catch"](function(e){console.log(e)})}})},getHomesByBookMarks:function(e){var n=this;return a(function(r,o){n.getSaleAndRent().then(function(n){var o=_.filter(n[0],function(t){return e.indexOf(t.$id)>-1}),i=_.filter(n[1],function(t){return e.indexOf(t.$id)>-1}),a=_.union(o,i);t.get(a).then(function(e){r(e)})})})},getSaleAndRent:function(){return a.all([m.$loaded(),p.$loaded()])},getHome:function(e){var n=f+e,r=d+e;return a(function(e,o){var i=u(new Firebase(n));i.$loaded().then(function(n){null===n.$value?(i=u(new Firebase(r)),i.$loaded().then(function(n){t.getByKey(n.agent).then(function(t){n.agentObj=t,e(n)})})):t.getByKey(n.agent).then(function(t){n.agentObj=t,e(n)})})["catch"](function(e){console.log(e)})})}}}])}(),function(){angular.module("search").directive("svListingSearchForm",["$location","homesUrl","UrlSeoConvertorServ","FbGenServ","SearchSaleServ","defaultImage","avatarBroker","$state","QueryServ",function(e,t,n,r,o,i,a,s,c){function u(e){var t=_.map(e,function(e){var t=e.$id.trim();return{value:t.toLowerCase(),display:t}});return t}return{replace:!0,templateUrl:"scripts/search/directives/sv-listing-search-form.html",scope:{inline:"="},link:function(e,o,l){e.query=c.get(),e.saleRent=function(t){e.query=e.query||c.get(),e.query.saleRent=t},e.listing={},e.defImage=i,e.avatarBroker=a,e.selectType=function(t){e.selectedType=t.$value},e.getAutoLoads=function(){r.getAssync(t+"autocomplete").then(function(t){e.cities=u(t)})}(),e.getTypes=function(){return r.getAssync(t+"types").then(function(t){e.types=t})};e.searchTextChange=function(e){},e.querySearch=function(t){var n;n=$("md-virtual-repeat-container");var r=_.filter(e.cities,function(e){return _.startsWith(e.value,t.toLowerCase())});if(t&&!r.length){n.hide()}else n.show();return r},e.runSearch=function(e){var t=n.parse(e);t.length?(c.set(e),s.go("app.search",{params:t})):s.go("app.search",{params:"all-homes-for-sale"})}}}}])}(),function(){angular.module("ad",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.user.ad",{"abstract":!0,url:"/ad",controller:"AdCtrl",templateUrl:"scripts/ad/views/adCtrl.html"}).state("app.user.ad.promotion",{url:"/promotion",controller:"CustomerAdCtrl as customerAd",templateUrl:"scripts/ad/promotion/views/customer-adCtrl.html"}).state("app.user.ad.start",{url:"/manage-campaign/:id",controller:"StartCampaignCtrl as startCampaign",templateUrl:"scripts/ad/promotion/views/start-campaignCtrl.html"})}])}(),function(){angular.module("ad").controller("AdCtrl",["$scope",function(e){}])}(),function(){angular.module("brokers",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.brokers",{url:"/brokers",onEnter:["$rootScope",function(e){e.underBrokers=!0}],onExit:["$rootScope",function(e){e.underBrokers=!1}],controller:"BrokersCtrl",templateUrl:"scripts/brokers/views/brokersCtrl.html"}).state("app.brokers.broker",{url:"/:id","abstract":!0,controller:"OneBrokerCtrl",templateUrl:"scripts/brokers/views/one-brokerCtrl.html"}).state("app.brokers.broker.profile",{url:"/profile",template:"<sv-broker-profile-info></sv-broker-profile-info>"}).state("app.brokers.broker.listings",{url:"/listings",controller:"BrokerActiveListingsCtrl",templateUrl:"scripts/brokers/views/broker-active-listingsCtrl.html"}).state("app.brokers.broker.blogs",{url:"/blog",template:"<sv-blogs-list></sv-blogs-list>"}).state("app.brokers.broker.reviews",{url:"/reviews",template:"<sv-reviews-public-info></sv-reviews-public-info>"}).state("app.brokers.broker.endorsements",{url:"/endorsements",template:"<sv-endorsements-public-info></sv-endorsements-public-info>"})}])}(),function(){angular.module("brokers").directive("svDefaultPhone",["userAuth","url","FbGenServ","$stateParams","companyFax",function(e,t,n,r,o){return{replace:!0,templateUrl:"scripts/brokers/directives/sv-default-phone.html",scope:{broker:"=",editRight:"="},link:function(e,i,a){r.id;e.companyFax=o;var s=[{name:"Office",value:"(847) 674-9797"}];_.forOwn(e.broker,function(e,t){if(t.indexOf("phone")>-1){var n=_.snakeCase(t).split("_")[1];s.push({name:_.capitalize(n),value:e})}}),e.phones=s,e.makeDefault=function(r){var o=t+"homes/agents/"+e.broker.$id;n.saveObject(o,{defaultTel:r.name})}}}}])}(),function(){angular.module("brokers").controller("BrokerActiveListingsCtrl",["$scope","$rootScope",function(e,t){t.$on("hide:listing:list",function(){e.hideListings=!0})}])}(),function(){angular.module("brokers").directive("svEndorsementsPublicInfo",["$mdDialog","FbGenServ","$sce","url","userAuth","$stateParams","VMServ",function(e,t,n,r,o,i,a){return{replace:!0,templateUrl:"scripts/brokers/directives/sv-endorsements-public-info.html",scope:{},link:function(s,c,u){function l(e,t,n,r){e.safeParsing=function(e){return r.trustAsHtml(e)},e.e=n.get(),e.hide=function(){t.hide()},e.cancelModal=function(){t.cancel()}}var f=i.id?i.id:o.profile.$id;t.getAssync(r+"blogs",function(e){return _.where(e,{brokerId:f,endorsements:!0})}).then(function(e){s.loaded=!0,s.endorsements=e}),s.safeParsing=function(e){return n.trustAsHtml(e)},s.showEndorsementsModal=function(t){a.set(t),e.show({controller:l,templateUrl:"scripts/brokers/views/modalEndorsements.html"})},l.$inject=["$scope","$mdDialog","VMServ","$sce"]}}}])}(),function(){angular.module("brokers").directive("svReviewForm",["userAuth","FbGenServ","agentsUrl","$stateParams",function(e,t,n,r){return{templateUrl:"scripts/brokers/directives/sv-review-form.html",scope:{evaluation:"=",reviewForm:"=",removeEditState:"&"},link:function(o,i,a){o.evaluation=o.evaluation||{rating:0},o.saveRating=function(i){var a=e.profile.userName;i.customer=s(e),i.avatar=e.profile.avatar,i.email=e.profile.email,i.timestamp=moment().format("x");var c=n+r.id+"/reviews/"+a;t.saveObject(c,i).then(function(e){o.removeEditState()})};var s=function(e){return e.google?e.google.displayName:e.facebook?e.facebook.displayName:_.startCase(e.profile.userName)}}}}])}(),function(){angular.module("brokers").directive("svReviewsPublicInfo",["VMServ","FbGenServ","$mdDialog","$stateParams","agentsUrl","userAuth","avatar",function(e,t,n,r,o,i,a){function s(e,t){var n=_.filter(e,function(e){return e.reviews?e.reviews[t]:!1}),r=_.map(n,function(e){var n=e.reviews[t];return n.agent={id:e.$id,fullname:e.fName+" "+e.lName,pic:e.pic},n});return r}return{replace:!0,scope:{customerPage:"="},templateUrl:"scripts/brokers/directives/sv-reviews-public-info.html",link:function(c,u,l){function f(e,t,n,r){e.reviewModal=r.get(),e.saveReviewModal=function(e){t.hide()},e.hide=function(){t.hide(),e.reviewModal=r.getPrevious()},e.cancel=function(){e.reviewModal=r.getPrevious(),t.cancel()}}var m;i.profile&&(c.userName=i.profile.userName),m=c.customerPage?o:o+r.id+"/reviews/",c.avatar=a;var d=t.getArrayLive(m);d.$loaded().then(function(){if(c.customerPage){var e;r.uid&&(e=r.uid),r.cid&&(e=r.cid),c.reviews=s(d,e)}else c.reviews=d;if(i.profile){var t=_.pluck(d,"customer");c.addReviewBtn=-1===t.indexOf(i.profile.userName)}d.$watch(function(){if(i.profile){var e=_.pluck(d,"customer");c.addReviewBtn=-1===e.indexOf(i.profile.userName)}c.reviews=d})}),c.removeReview=function(e){t.removeObj(m+e.$id).then(function(){}),c.editState=!1,c.reviewForm=!1},c.setEditState=function(e){c.showReviewModal(e)},c.showReviewModal=function(t){e.set(t),n.show({controller:f,templateUrl:"scripts/customers/templates/modalCustomerReview.html"})},f.$inject=["$scope","$mdDialog","$rootScope","VMServ"],c.removeEditState=function(){c.editState=!1},c.addReview=function(){c.reviewForm=!0},c.range=function(e){for(var t=[],n=0;e>n;n++)t.push(n);return t}}}}])}(),function(){angular.module("brokers").factory("BrokerProfileServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){var i,a;return{set:function(e){a&&(i=_.clone(a,!0)),a=_.clone(e,!0)},get:function(){return a},getPrevious:function(){return a=i,i}}}])}(),function(){angular.module("brokers").filter("tel",function(){return function(e){if(!e)return"";var t=e.toString().trim().replace(/^\+/,"");if(t.match(/[^0-9]/))return e;var n,r;switch(t.length){case 1:case 2:case 3:n=t;break;default:n=t.slice(0,3),r=t.slice(3)}return r?(r=r.length>3?r.slice(0,3)+"-"+r.slice(3,7):r,("("+n+") "+r).trim()):"("+n}})}(),function(){angular.module("brokers").directive("svBrokerProfileContactInfo",["BrokerProfileServ","$stateParams","FbGenServ","$timeout","homesUrl","userAuth","$mdDialog","toastr","companyPhone","companyFax","defaultBrokerTitle",function(e,t,n,r,o,i,a,s,c,u,l){return{replace:!0,templateUrl:"scripts/brokers/directives/sv-broker-profile-contact-info.html",link:function(r,i,s){function f(e,t,n,r){e.brokerModal=r.get(),e.saveProfileModalImg=function(r){n.$broadcast("broker:changed",e.brokerModal),t.hide()},e.hide=function(){e.brokerModal=r.getPrevious(),t.hide()},e.cancel=function(){e.brokerModal=r.getPrevious(),t.cancel()}}function m(e,t,n,r){e.brokerModal=r.get(),e.saveProfileModal=function(){n.$broadcast("broker:changed",e.brokerModal),t.hide()},e.hide=function(){e.brokerModal=r.getPrevious(),t.hide()},e.cancelModal=function(){e.brokerModal=r.getPrevious(),t.cancel()}}function d(e,t,n,r){e.brokerModal=r.get(),e.saveProfileModal=function(){n.$broadcast("broker:changed"),t.hide()},e.hide=function(){t.hide(),e.brokerModal=r.getPrevious()},e.cancel=function(){e.brokerModal=r.getPrevious(),t.cancel()}}e.set(r.broker),r.companyPhone=c,r.companyFax=u,r.defaultBrokerTitle=l,n.getAssync(o+"sale",function(e){var n=_.filter(e,function(e){return e.agent===t.id});return n.length}).then(function(e){r.brokerHomesCount=e}),r.showBrokerUploadImgModal=function(){a.show({controller:f,templateUrl:"scripts/brokers/views/modalBrokerUploadImg.html"})},f.$inject=["$scope","$mdDialog","$rootScope","BrokerProfileServ"],r.showBrokerContactInfoModal=function(){e.set(e.get()),a.show({controller:m,templateUrl:"scripts/brokers/views/modalBrokerContactInfo.html"})},m.$inject=["$scope","$mdDialog","$rootScope","BrokerProfileServ"],r.showBrokerProfileHighlightsModal=function(){e.set(e.get()),a.show({controller:d,templateUrl:"scripts/brokers/views/modalBrokerProfileHighlights.html"})},d.$inject=["$scope","$mdDialog","$rootScope","BrokerProfileServ"]}}}])}(),function(){angular.module("brokers").directive("svBrokerProfileInfo",["FbGenServ","homesUrl","BrokerProfileServ","userAuth","$mdDialog","toastr","companyPhone","companyFax",function(e,t,n,r,o,i,a,s){return{replace:!0,templateUrl:"scripts/brokers/directives/sv-broker-profile-info.html",link:function(i,a,s){function c(e,t,r){e.brokerModal=n.get(),e.saveProfileModal=function(){r.$broadcast("broker:changed",e.brokerModal),t.hide()},e.hide=function(){e.brokerModal=n.getPrevious(),t.hide()},e.cancel=function(){e.brokerModal=n.getPrevious(),t.cancel()}}function u(e,t,r){e.brokerModal=n.get(),e.saveProfileModal=function(){r.$broadcast("broker:changed",e.brokerModal),t.hide()},e.hide=function(){e.brokerModal=n.getPrevious(),t.hide()},e.cancel=function(){e.brokerModal=n.getPrevious(),t.cancel()}}function l(e,t,r){e.brokerModal=n.get(),e.saveProfileModal=function(){r.$broadcast("broker:changed",e.brokerModal),t.hide()},e.hide=function(){t.hide(),e.brokerModal=n.getPrevious()},e.cancel=function(){t.cancel(),e.brokerModal=n.getPrevious()}}function f(e,t,r){e.brokerModal=n.get(),e.saveProfileModal=function(){console.log("run here sv-broker-profile.js"),r.$broadcast("broker:changed",e.brokerModal),t.hide()},e.hide=function(){e.brokerModal=n.getPrevious(),t.hide()},e.cancel=function(){e.brokerModal=n.getPrevious(),t.cancel()}}i.saveProfile=function(){e.saveObject(t+"agents/"+r.profile.brokerId,i.broker).then(function(e){}),i.editState=!1},i.showBrokerProfileHighlightsModal=function(e){n.set(n.get()),o.show({controller:c,templateUrl:"scripts/brokers/views/modalBrokerProfileHighlights.html"})},c.$inject=["$scope","$mdDialog","$rootScope"],i.showBrokerAccreditationModal=function(e){n.set(n.get()),o.show({controller:u,templateUrl:"scripts/brokers/views/modalBrokerAccreditation.html"})},u.$inject=["$scope","$mdDialog","$rootScope"],i.showBrokerProfInfoModal=function(e){n.set(n.get()),o.show({controller:l,templateUrl:"scripts/brokers/views/modalBrokerProfInfo.html"})},l.$inject=["$scope","$mdDialog","$rootScope"],i.showBrokerExperienceModal=function(e){n.set(n.get()),o.show({controller:f,templateUrl:"scripts/brokers/views/modalBrokerExperience.html"})},f.$inject=["$scope","$mdDialog","$rootScope"]}}}])}(),function(){angular.module("brokers").directive("svBrokerBlogs",["url","toastr","$stateParams","FbGenServ","userAuth",function(e,t,n,r,o){return{replace:!0,templateUrl:"scripts/brokers/directives/sv-broker-blogs.html",scope:{blogs:"="},controller:["$scope",function(n){this.removeBlog=function(o,i){var a=e+"blogs/"+o;r.removeObj(a).then(function(){t.success("Blog  deleted"),n.blogs.splice(i-1,1)})}}],link:function(t,i,a){var s=n.id?n.id:o.profile.brokerId;r.getAssync(e+"blogs",function(e){t.blogs=_.where(e,{brokerId:s})}).then(function(e){t.loaded=!0})}}}])}(),function(){angular.module("brokers").directive("svBrokerProfileThumb",["avatarBroker","companyPhone",function(e,t){return{replace:!0,templateUrl:"scripts/brokers/directives/sv-broker-profile-thumb.html",link:function(n,r,o){n.avatarBroker=e,n.companyPhone=t;var i=n.agent.defaultTel,a=i?"phone"+i:null;a?n.contactPhone=n.agent[a]:n.contactPhone=t}}}])}(),function(){angular.module("brokers").controller("OneBrokerCtrl",["$scope",function(e){}])}(),function(){angular.module("brokers").controller("BrokersCtrl",["$scope","FbGenServ","homesUrl",function(e,t,n){t.getAssync(n+"agents").then(function(r){e.agents=r,t.getAssync(n+"sale").then(function(e){var t=_.countBy(e,function(e){return e.agent});r.forEach(function(e){e.countSale=t[e.$id]})})["catch"](function(e){console.log("Error in getting agents list"+e.message)})})["catch"](function(e){console.log("Error in getting agents list"+e.message)})}])}(),function(){angular.module("customers",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.customers",{url:"/customers",resolve:{customers:["FbGenServ","url",function(e,t){return e.getAssync(t+"/user-management/users",function(e){return e=e.map(function(e){return"customer"===e.profile.role?e:void 0}),_.compact(e)})["catch"](function(e){console.log(e)})}]},onEnter:["$rootScope",function(e){e.underCustomers=!0}],onExit:["$rootScope",function(e){e.underCustomers=!1}],controller:"CustomersCtrl",templateUrl:"scripts/customers/views/customersCtrl.html"}).state("app.customers.one-customer",{url:"/:cid",controller:"OneCustomerCtrl",templateUrl:"scripts/customers/views/one-customerCtrl.html"})}])}(),function(){angular.module("customers").controller("CustomersCtrl",["$scope","customers","url",function(e,t,n){e.customers=t}])}(),function(){angular.module("customers").controller("OneCustomerCtrl",["$scope","customers","$stateParams",function(e,t,n){var r=n.cid;e.customer=_.find(t,function(e){return e.profile.userName===r}),console.log(e.customer)}])}(),function(){angular.module("customers").directive("svCustomerReviewsList",function(){return{replace:!0,templateUrl:"scripts/customers/directives/sv-customer-reviews-list.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("customers").directive("svCustomerProfileThumb",["avatar",function(e){return{replace:!0,templateUrl:"scripts/customers/directives/sv-customer-profile-thumb.html",scope:{customer:"="},link:function(t,n,r){t.avatar=e}}}])}(),function(){angular.module("customers").directive("svCustomerProfile",function(){return{replace:!0,templateUrl:"scripts/customers/directives/sv-customer-profile.html",link:function(e,t,n){}}})}(),function(){angular.module("common",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.section",{url:"/sections/:sectionName",controller:"SectionCtrl",templateUrl:"scripts/common/views/sectionCtrl.html"})}])}(),function(){angular.module("common").directive("svMainSectionsBottomNav",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-main-sections-bottom-nav.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("common").directive("svFooter",["companyPhone","companyFax","companyName",function(e,t,n){return{replace:!0,templateUrl:"scripts/common/directives/sv-footer.html",scope:{},link:function(r,o,i){r.companyName=n,r.companyPhone=e,r.companyFax=t}}}])}(),function(){angular.module("common").factory("VMServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){var i,a;return{set:function(e){a&&(i=_.clone(a,!0)),a=_.clone(e,!0)},get:function(){return a},getPrevious:function(){return a=i,i}}}])}(),function(){angular.module("common").factory("ImgBase64Serv",["$q","$http","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o,i){return{imgUrlToBlob:function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);return new Blob([r],{type:n})},postUrl:function(n,r,o){return e(function(e,i){var a=this.imgUrlToBlob(r),s=new FormData;s.append(o,a,o+".jpg"),t.post(n,s,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(t){e(t)}).error(function(e){})})}}}])}(),function(){angular.module("common").factory("QueryServ",["$q","url","users","$firebaseObject","$firebaseArray","UrlSeoConvertorServ",function(e,t,n,r,o,i){var a;return{get:function(){return a||(a={saleRent:"sale",bedrooms:[]}),a},set:function(e){a=_.assign(a,e)},getString:function(){for(var e,t="",n=i.parse(this.get()),r=n.split("/"),o=1;o<r.length;o+=2){var a=r[o],s=r[o+1];if("bedrooms"===a)if("0"===s)a="",s="Studio";else{var c=a;a=s,s=c}e=a+" "+s+" & ",t+=e}t=t.substr(0,t.length-3);return t},isRent:function(){return"rent"===this.get().saleRent}}}])}(),function(){angular.module("common").factory("FbGenServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){return{getArrayLive:function(e){return o(new Firebase(e))},getObject:function(e){return r(new Firebase(e))},getAssync:function(t,n){return e(function(e,r){var i=o(new Firebase(t));i.$loaded().then(function(t){n&&(t=n(t)),e(t)})["catch"](function(e){r(e)})})},saveObject:function(t,n){return e(function(e,o){var i=r(new Firebase(t));i.$loaded().then(function(t){_.forOwn(n,function(e,t){i[t]||(i[t]=e),_.isObject(i[t])||i[t]===e||(i[t]=e)}),i.$save().then(function(t){e(t)})})["catch"](function(e){o(e)})})},removeObj:function(t){return e(function(e,n){var o=r(new Firebase(t));o.$remove().then(function(){e()})})}}}])}(),function(){angular.module("common").directive("svGoogleShare",["$location","$timeout",function(e,t){return{templateUrl:"scripts/common/directives/sv-google-share.html",scope:{},link:function(n,r,o){t(function(){n.pageUrl=e.absUrl()},500)}}}])}(),function(){angular.module("common").directive("svFadeIn",["$timeout",function(e){return{priority:-1,link:function(e,t,n){e.$watch(n.svFadeIn,function(e,n){e!=n&&(t.animate({opacity:0},400),t.animate({opacity:1},400))})}}}])}(),function(){angular.module("common").factory("AWSServ",["$q","$http","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o,i){return{getImages:function(n){var r,o=/<key>([^<])+/gi,i=[];return e(function(e,a){var s="https://"+n+".s3-us-west-2.amazonaws.com";t.get(s).then(function(t){var n=t.data;for(r=o.exec(n);null!==r;){if(r){var a=r[0].replace("<Key>","");i.push(a)}r=o.exec(n)}e(i)})})}}}])}(),function(){angular.module("common").directive("svImageThumb",["$state","defimg",function(e,t){return{replace:!0,templateUrl:"scripts/common/directives/sv-image-thumb.html",scope:{svImage:"@",linkRoute:"@",params:"="},link:function(n,r,o){n.svImage=n.svImage||t,n.navigate=function(){e.go(n.linkRoute,{id:n.params})};var i=new Image;i.src=n.svImage,i.onload=function(){var e=(i.width,i.height,r.find("i"));e.css({"background-image":"url("+n.svImage+")","background-size":"cover","background-position":"50% 25%",height:"100%",display:"block"})}}}}])}(),function(){angular.module("common").directive("svFbLike",["TrailingSlashServ","$location",function(e,t){return{templateUrl:"scripts/common/directives/sv-fb-like.html",scope:{btnAction:"@"},link:function(n,r,o){n.pageUrl=e.add(t.absUrl()),n.profiles=n.profiles||"false",n.btnAction=n.btnAction||"like"}}}])}(),function(){angular.module("common").directive("svFbShare",["TrailingSlashServ","$location",function(e,t){return{replace:!0,templateUrl:"scripts/common/directives/sv-fb-share.html",scope:{},link:function(n,r,o){n.pageUrl=e.add(t.absUrl())}}}])}(),function(){angular.module("common").directive("svFbFollow",["$location",function(e){return{replace:!0,templateUrl:"scripts/common/directives/sv-fb-follow.html",scope:{},link:function(e,t,n){}}}])}(),function(){angular.module("common").directive("svImageScale",["$window",function(e){function t(e,t,n,r){var o=.64,i=.9,a=e.naturalHeight,s=e.naturalWidth;if(a>=s){var c=(o*n).toFixed(0);t.css("height",c+"px"),t.css("width","auto"),angular.element(e).css("height","100%"),e.style.width="auto"}s>a&&(t.css("width",(i*r).toFixed(0)+"px"),t.css("height","auto"),angular.element(e).css("height","auto"),e.style.width="100%")}return{link:function(e,n,r){var o=1e3,i=window.innerHeight,a=window.innerWidth>o?o:window.innerWidth;$(window).resize(function(){i=window.innerHeight,a=window.innerWidth>o?o:window.innerWidth,e.$apply(function(){t(s,n,i,a)})});var s=n.find("img")[0];s.onload=function(){t(s,n,i,a)}}}}])}(),function(){angular.module("common").value("s3",{files:[]}).value("galleryModal",{shown:!1}).directive("svOnePhotoGallery",["AWSServ","galleryModal","$location","$mdDialog","dt","$timeout","$state",function(e,t,n,r,o,i,a){return{replace:!0,templateUrl:"scripts/common/directives/sv-one-photo-gallery.html",scope:{activeImg:"="},link:function(s,c,u){function l(e){o.vm=e,r.show({controller:f,templateUrl:"scripts/common/views/photo-gallery-modal.html"})}function f(e,r,o,s){e.awsBase="https://s3-us-west-2.amazonaws.com/kohl/",e.imgIndex=o.vm.currentIndex,e.files=o.vm.images;var c=e.files.length-1;e.currentImage=e.awsBase+e.files[e.imgIndex],e.nextSvImage=function(){var t=e.imgIndex;t++,t>c&&(t=0),e.imgIndex=t,i(function(){e.currentImage=e.awsBase+e.files[e.imgIndex],a.go("app.events.kohl2015.photo-gallery",{photoId:t})},d)},e.prevSvImage=function(){var t=e.imgIndex;t--,0>t&&(t=c),e.imgIndex=t,i(function(){e.currentImage=e.awsBase+e.files[e.imgIndex],a.go("app.events.kohl2015.photo-gallery",{photoId:t})},d)},e.hide=function(){r.hide(),t.state=!1,n.path(m(n.path()))}}function m(e,t){var n=e.lastIndexOf("/")+1;return e=e.substr(0,n),_.isUndefined(t)||(e+=t),e}var d=400,p=!0;s.bucketUrl="https://s3-us-west-2.amazonaws.com/kohl/",e.getImages("kohl").then(function(e){if(s.images=[],p)for(var t=e.length-1;t>=0;t--){var n=e[t];s.images.push(n)}else s.images=e;s.activeImg&&s.showGalleryModal(s.activeImg)}),s.showGalleryModal=function(e){if(!t.state){var n={images:s.images,currentIndex:e};t.state=!0,i(function(){a.go("app.events.kohl2015.photo-gallery",{photoId:e},{reload:!1}).then(function(){l(n)})},d)}},f.$inject=["$scope","$mdDialog","dt","s3"]}}}])}(),function(){angular.module("common").directive("svAnimateOnIndexChange",["$timeout",function(e){return{priority:-1,link:function(t,n,r){t.$watch(r.svAnimateOnIndexChange,function(t,r){t!=r&&(n.addClass("changed"),e(function(){n.removeClass("changed")},1e3))})}}}])}(),function(){angular.module("common").directive("svImgBackground",["$state","defaultImage","avatarBroker",function(e,t,n){return{replace:!0,templateUrl:"scripts/common/directives/sv-img-background.html",scope:{wrapperClass:"@",svImage:"=",imgWidth:"@",imgHeight:"@",linkRoute:"@",params:"="},link:function(r,o,i){r.avatarBroker=n,r.svImage=r.svImage||t,r.navigate=function(){e.go(r.linkRoute,{id:r.params})},r.$watch("svImage",function(e,t){e!=t&&r.loadImage(e)}),r.loadImage=function(e){r.svImage=e||t;var n=new Image;n.src=e||t,n.onload=function(){var e=(n.width,n.height,o.find("i"));e.css({"background-image":"url("+r.svImage+")","background-size":"cover","background-position":"50% 25%",height:"100%",display:"block"})}},r.loadImage(r.svImage)}}}])}(),function(){angular.module("common").factory("ImageValidationServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){return{validate:function(e,t){var n=[];return t.svMaxSize&&e.size>1048576*t.svMaxSize&&n.push("Image exceeds max size limit."),t.svMinWidth&&e.width<t.svMinWidth&&n.push("Image width is below  the limit"),t.svMinHeight&&e.height<t.svMinHeight&&n.push("Image height is below the limit"),t.svMaxWidth&&e.width>t.svMaxWidth&&(n.push("Should be in "+t.svMinWidth+"px - "+t.svMaxWidth+"px range."),n.push("Image width is above  the limit")),t.svMaxHeight&&e.height>t.svMaxHeight&&(n.push("Should be in "+t.svMinHeight+"px - "+t.svMaxHeight+"px range."),n.push("Image height is above the limit")),n}}}])}(),function(){angular.module("common").directive("svBanBtn",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-ban-btn.html",scope:{cl:"="},link:function(e,t,n){}}})}(),function(){angular.module("common").directive("svStatusLabel",function(){return{templateUrl:"/scripts/common/directives/sv-status-label.html",scope:{labelTitle:"@",fs:"@",tc:"@",bgc:"@",labelPadding:"@"},link:function(e,t,n){}}})}(),function(){angular.module("common").directive("svQuickLookBtn",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-quick-look-btn.html",scope:{modalMethod:"&"},link:function(e,t,n){}}})}(),function(){angular.module("common").directive("svZeroLengthNotice",["$filter","userAuth",function(e,t){return{replace:!0,templateUrl:"scripts/common/directives/sv-zero-length-notice.html",scope:{list:"=",filter:"@",filterValue:"@",item:"@",ownerField:"@"},link:function(e,t,n){e.filteredList=e.list}}}])}(),function(){angular.module("common").value("confirmMessage",{msg:"Are you sure?"}).directive("svConfirmDeletion",["$mdDialog","confirmMessage","toastr","$parse",function(e,t,n,r){return{priority:-1,link:function(n,o,i){o.on("click",function(o){o.stopImmediatePropagation(),o.preventDefault();var a="Delete "+i.svConfirmDeletion+"?";t.msg=a,e.show({controller:["$scope","$mdDialog","confirmMessage",function(e,t,n){e.message=n.msg,e["delete"]=function(){t.hide(!0)},e.cancel=function(){t.cancel()}}],templateUrl:"scripts/common/views/modalDeleteConfirm.html"}).then(function(){var e=r(i.ngClick);e(n)})})}}}])}(),function(){angular.module("common").value("confirmBanMessage",{msg:"Are you sure?"}).directive("svConfirmBan",["$mdDialog","confirmBanMessage","toastr","$parse","ClassifiedServ",function(e,t,n,r,o){return{priority:-1,link:function(n,o,i){o.on("click",function(o){o.stopImmediatePropagation(),o.preventDefault();var a="Ban "+i.svConfirmBan+"?";t.msg=a,e.show({controller:["$scope","$mdDialog","confirmBanMessage",function(e,t,n){e.message=n.msg,e.banByManager=function(){console.log("run here sv-confirm-ban.js"),t.hide(!0)},e.cancel=function(){t.cancel()}}],templateUrl:"scripts/common/views/modalBanConfirm.html"}).then(function(){console.log("Promise");var e=r(i.ngClick);e(n)})})}}}])}(),function(){angular.module("common").directive("svSocialMediaList",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-social-media-list.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("common").directive("svFormVal",["$compile","$timeout",function(e,t){return{restrict:"A",priority:100,require:"?^form",compile:function(n,r){var o=n.find("input"),i=n.find("textarea[required]"),a=_.union(o,i),s=_.pluck(a,"name"),c=_.compact(_.map(o,function(e){var t=angular.element(e).parent("lx-text-field");return t.length>0?t:void 0})),u=n.find("md-radio-group"),l=u.attr("name"),f=n.find("md-select"),m=f.attr("name");return function(n,r,o,i){function d(r,o){var i=p+"."+o,a=i+".$touched",s=i+".$error",c=p+".$submitted",u="<div ng-if='"+a+"|| "+c+"'ng-messages='"+s+"'><div ng-messages-include='scripts/common/templates/form-error-messages.html'></div></div>",l=e(u)(n);t(function(){angular.element(r).after(l)},20)}var p=i.$name,v=c.length>0?c:a;angular.forEach(v,function(e,t){d(e,s[t])}),d(u,l),d(f,m)}}}}])}(),function(){angular.module("common").directive("svAppLabel",["$state",function(e){return{templateUrl:"scripts/common/directives/sv-app-label.html",scope:{routeName:"@",iconType:"@",iconName:"@",params:"=",fs:"@",tc:"@",bgc:"@",cursorType:"@",sectionTitle:"@",textDecoration:"@",labelPadding:"@"},link:function(t,n,r){t.textDecoration=t.textDecoration||"underline",t.fs="fs-caption",t.tc=t.tc||"tc-grey-500",t.bgc=t.bgc||"bgc-grey-300",t.labelPadding=t.labelPadding||"2px 4px",t.navigateTo=function(){e.go(t.routeName,t.params)}}}}])}(),function(){angular.module("common").directive("svStarRating",function(){return{template:"<ul class='rating' ng-class='{readonly: readonly}'>  <li ng-repeat='star in stars' ng-class='star' ng-click='toggle($index)'>    <i class='fa fa-star'></i>  </li></ul>",scope:{ratingValue:"=ngModel",max:"=?",onRatingSelected:"&?",readonly:"=?"},link:function(e,t,n){function r(){e.stars=[];for(var t=0;t<e.max;t++)e.stars.push({filled:t<e.ratingValue})}void 0==e.max&&(e.max=5),e.toggle=function(t){(void 0==e.readonly||0==e.readonly)&&(e.ratingValue=t+1,e.onRatingSelected({rating:t+1}))},e.$watch("ratingValue",function(e,t){t&&r()})}}})}(),function(){angular.module("common").directive("svLumxButton",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-lumx-button.html",scope:{bntUrl:"@",methodClick:"&",btnSize:"@",btnType:"@",btnColor:"@",textColor:"@",bgColor:"@",btnTitle:"@",iconType:"@",iconName:"@"},link:function(e,t,n){}}})}(),function(){angular.module("common").directive("svLinkBack",["userAuth","$state",function(e,t){
return{replace:!0,templateUrl:"scripts/common/directives/sv-link-back.html",scope:{customBtnText:"@",goUp:"="},link:function(e,t,n){}}}])}(),function(){angular.module("common").factory("HtmlParseServ",["$q","$http","$sanitize","$sce",function(e,t,n,r){function o(e){var t=$("<div></div>");t.html(e);for(var r=_.take($(".zoomMe",t).find("p"),7),o="",i=0;i<r.length;i++){var a,s=r[i];try{if(a=n(s.outerHTML),~a.indexOf("background-color"))continue;a.replace(/\&\#34;/g,'"')}catch(c){console.log(c);continue}1===i&&(o+="<br/>"),o+=a}var u=$(".topintend",t).text().replace(":","").trim();return{body:o.trim(),tags:u}}return{getFullNews:function(n){return e(function(e,r){t.get(n).then(function(t){var n=o(t.data);e(n)})})},getMultipleFullNews:function(t){var n=this,r=_.pluck(t,"link"),o=[];return r.forEach(function(e){o.push(n.getFullNews(e))}),e.all(o)}}}])}(),function(){angular.module("common").factory("FormattedDateServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){return{get:function(){},getFormattedDate:function(){var e=new Date;return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()}}}])}(),function(){angular.module("common").filter("sectionNews",function(){return function(e,t,n){if(!e||!t)return e;if("endorsements"===t)var r=_.filter(e,function(e){return e.endorsements});else var r=_.filter(e,function(e){return e.section.toLowerCase()===t.toLowerCase()});if(n)var r=_.filter(e,function(e){return e.section.toLowerCase()!==t.toLowerCase()});return r}})}(),function(){angular.module("common").directive("svBottomSheetHandler",["$mdBottomSheet",function(e){return{link:function(t,n,r){n.on("touchstart",function(n){n.preventDefault(),n.stopPropagation(),t.$apply(function(){e.show({templateUrl:"scripts/common/templates/social-top-nav-cell.html"})})}),n.on("click",function(n){n.preventDefault(),n.stopPropagation(),t.$apply(function(){e.show({templateUrl:"scripts/common/templates/social-top-nav-cell.html"})})})}}}])}(),function(){angular.module("common").directive("svNavBtn",["$rootScope","$mdSidenav",function(e,t){return{replace:!0,templateUrl:"scripts/common/directives/sv-nav-btn.html",scope:{url:"@",title:"@",customClass:"@",iconType:"@",color:"@",btnStyle:"@",btnSize:"@",bgc:"@",txtColor:"@",customStyle:"@",icon:"@"},link:function(e,n,r){e.closeSideBar=function(){t("left").close(),t("right").close()}}}}])}(),function(){angular.module("common").directive("svNavLink",["$mdSidenav",function(e){return{templateUrl:"/scripts/common/directives/sv-nav-link.html",scope:{url:"@",iconType:"@",navClass:"@",icon:"@",stitle:"@",someObject:"=",someString:"@",someExpr:"&"},link:function(e,t,n){}}}])}(),function(){angular.module("common").directive("svProfileSubhead",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-profile-subhead.html",scope:{subheadTitle:"@"},link:function(e,t,n){}}})}(),function(){angular.module("common").directive("svProfileTitle",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-profile-title.html",scope:{headerTitle:"@"},link:function(e,t,n){}}})}(),function(){angular.module("common").directive("svTabSwipe",function(){return{link:function(e,t,n,r){t.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()})}}})}(),function(){angular.module("common").directive("svNavBarMedia",["$mdMedia",function(e){return{link:function(t,n,r){t.$watch(function(){return e("gt-md")},function(e){e?(n.css("height","auto"),n.css("min-height","76px")):n.css("height","42px")})}}}])}(),function(){angular.module("common").directive("svLoader",function(){return{templateUrl:"scripts/common/directives/sv-loader.html"}})}(),function(){angular.module("common").directive("svReadMore",["$state",function(e){return{replace:!0,templateUrl:"scripts/common/directives/sv-read-more.html",scope:{news:"=",routeName:"@",svParams:"=",readMore:"@"},link:function(t,n,r){t.navigate=function(){e.go(t.routeName,{id:t.svParams})}}}}])}(),function(){angular.module("common").factory("TrailingSlashServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){return{add:function(e){return"/"!==_.last(e)&&(e+="/"),e}}}])}(),function(){angular.module("common").directive("svSidenavTitle",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-sidenav-title.html",scope:{iconType:"@",iconName:"@",title:"@"},link:function(e,t,n){}}})}(),function(){angular.module("common").directive("svLeftClickHandler",function(){return{link:function(e,t,n){t.on("touchstart",function(t){t.preventDefault(),t.stopPropagation(),e.$apply(function(){e.toggleLeft()})}),t.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.$apply(function(){e.toggleLeft()})})}}})}(),function(){angular.module("common").directive("svRightClickHandler",function(){return{link:function(e,t,n){t.on("touchstart",function(t){t.preventDefault(),t.stopPropagation(),e.$apply(function(){e.toggleRight()})}),t.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.$apply(function(){e.toggleRight()})})}}})}(),function(){angular.module("common").config(["$mdThemingProvider",function(e){var t=e.extendPalette("grey",{A100:"#474341"});e.definePalette("app",t),e.theme("default").primaryPalette("app",{"default":"400","hue-1":"200","hue-2":"600","hue-3":"A100"}).backgroundPalette("grey",{"default":"50"}).accentPalette("red",{"default":"600","hue-1":"500"})}])}(),function(){angular.module("common").config(["$mdIconProvider",function(e){e.defaultIconSet("./img/svg/avatars.svg",128).icon("sv-menu","./img/svg/menu.svg",24).icon("sv-close","./img/svg/close.svg",24).icon("share","./img/svg/share.svg",24).icon("google_plus","./img/svg/google_plus.svg",512).icon("hangouts","./img/svg/hangouts.svg",512).icon("twitter","./img/svg/twitter.svg",512).icon("phone","./img/svg/phone.svg",512)}])}(),function(){var e="remax1stclass";angular.module("common").constant("routesRadioShow",["app","app.home"]).constant("url","https://"+e+".firebaseio.com/").constant("homesUrl","https://"+e+".firebaseio.com/homes/").constant("agentsUrl","https://"+e+".firebaseio.com/homes/agents/").constant("maps","http://maps.google.com/?q=").constant("users","https://"+e+".firebaseio.com/user-management/users/").constant("ads","https://"+e+".firebaseio.com/ads/").constant("companyName","Re/Max 1st Class").constant("companyWebsite","http://remax1stclass.com/").constant("companyStreetAddress","4023 W. Church St.").constant("companyCity","Chicago").constant("defaultBrokerTitle","Real Estate Agent").constant("companyState","IL").constant("companyZip","60076").constant("companyPhone","(847) 674-9797").constant("companyFax","(847) 674-0411").constant("companyEmail","remax1stclass@gmail.com").constant("icon",{sHome:"img/icons/house-red.png",condo:"img/icons/bighouse-red.png",mHome:"img/icons/office-building-orange.png",townhouse:"img/icons/townhouse-yellow.png",duplex:"img/icons/apartment-orange.png",land:"img/icons/landmark-green.png"}).constant("distanceToNearest",2e4).constant("defaultImage","../img/common/image-empty.png").constant("userAuth",{}).constant("lastEditorPost",{}).constant("appNews",{}).constant("blogsConst",{}).constant("classified",{}).constant("feedback",{}).constant("viewModalConst",{}).constant("dt",{}).constant("classifiedInterval",63e3).service("urlUsers",["url",function(e){this.url=e+"/user-management/users/"}]).constant("SOCIAL_PLUGINS",["like","share-button","send","post","video","comments","page","follow"]).value("weather","https://publicdata-weather.firebaseio.com/chicago").value("avatar","/img/auth/user.png").value("googleMap","/img/listings/google_maps.png").value("avatarBroker","/img/auth/broker.png").value("defimg","/img/common/picture-thumb.png").value("alex","/img/auth/alex-sepia.jpg").value("mapStyler",[{featureType:"all",stylers:[{saturation:0},{hue:"#e7ecf0"}]},{featureType:"road",stylers:[{saturation:-70}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"simplified"},{saturation:-60}]}])}(),function(){angular.module("sections.home").factory("ImageSizeServ",["$q",function(e){return{getScaledHeight:function(t,n){return e(function(e,r){var o=new Image;o.onload=function(){var t=o.width,r=o.height,i=n/t;e(Math.floor(r*i))},o.src=t})}}}])}(),function(){angular.module("common").directive("svModalWindowSizeMedia",["$mdMedia",function(e){return{link:function(t,n,r,o){return{link:function(t,n,r){console.log("run here sv-modal-window-size-media.js"),t.$watch(function(){return e("sm")},function(e){e?(n.css("min-height","100%"),n.css("min-width","100%")):(n.css("height","auto"),n.css("width","auto"))})}}}}}])}(),function(){angular.module("auth",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){angular.module("auth").controller("SignUpCtrl",["$scope",function(e){}])}(),function(){angular.module("auth").controller("LoginCtrl",["$scope",function(e){}])}(),function(){angular.module("auth").directive("svUniqueUsername",["$q","$timeout","UserUniqueServ",function(e,t,n){return{require:"?^ngModel",link:function(t,r,o,i){i.$asyncValidators.svUniqueUsername=function(r,o){return r=r.trim().replace(/\s+/g,"-").toLowerCase(),r===t.oldUserName?e.when(!0):n.isUserNameUnique(r)},i.$formatters.push(function(e){return e?e.replace(/\s+/g,"-").toLowerCase():void 0}),i.$parsers.push(function(e){return e?e.replace(/\s+/g,"-").toLowerCase():void 0})}}}])}(),function(){angular.module("auth").directive("svUniqueEmail",["$q","$timeout","UserUniqueServ",function(e,t,n){return{require:"?^ngModel",link:function(t,r,o,i){i.$asyncValidators.svUniqueEmail=function(r,o){return r=r.trim().replace(/\s+/g,"-").toLowerCase(),r===t.oldUserName?e.when(!0):n.isUserEmailUnique(r)},i.$formatters.push(function(e){return e?e.replace(/\s+/g,"-").toLowerCase():void 0}),i.$parsers.push(function(e){return e?e.replace(/\s+/g,"-").toLowerCase():void 0})}}}])}(),function(){angular.module("auth").directive("svRequestBusinessAccountBtn",["RequestServ","userAuth","toastr",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/directives/sv-request-business-account-btn.html",scope:{},link:function(r,o,i){r.user=t,r.cancelRequest=function(){e.cancelRequest(t.key).then(function(){n.warning("Your request for Re/Max 1st Class Broker account has been canceled")})},r.submitRequest=function(){e.submitRequest(t.key).then(function(){n.info("Your request for Re/Max 1st Class Broker  business account  submitted")})}}}}])}(),function(){angular.module("auth").directive("svEmailSubscription",["userAuth","FbGenServ","url",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/directives/sv-email-subscription.html",scope:{},link:function(r){r.user=e.profile;var o=t.getObject(n+"subscriptions/"+r.user.userName);o.$bindTo(r,"subscription")}}}])}(),function(){angular.module("auth").directive("svSocialProvider",["AuthenticationServ","$state","userAuth",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/directives/sv-social-provider.html",scope:{provider:"@",btnClass:"@",btnName:"@",iconClass:"@",icon:"@"},link:function(r,o,i){r.icon=r.icon||r.provider,r.loginProvider=function(r){r=r.toLowerCase().replace("+",""),e.authWithProvider(r).then(function(){var e=n.profile;if(e){if(e.isStaff())return void t.go("app.user.listings",{uid:n.profile.userName});if(e.isManager())return void t.go("app.manager.dashboard",{uid:n.profile.userName});if(e.isCustomer())return void t.go("app.user.account-settings",{uid:n.profile.userName})}})["catch"](function(e){console.log(e)})}}}}])}(),function(){angular.module("auth").directive("svFormSocialButtons",function(){return{replace:!0,templateUrl:"scripts/auth/directives/sv-form-social-buttons.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("auth").directive("svSignUpForm",["ProfileServ","$state","toastr","AuthenticationServ","$mdDialog","companyName",function(e,t,n,r,o,i){return{replace:!0,templateUrl:"scripts/auth/directives/sv-sign-up-form.html",scope:{headerTitle:"@",name:"@",register:"@",registering:"@",conditions:"@",registered:"@",login:"@"},controller:["$scope",function(r){function a(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}r.companyName=i,r.user={userName:"",email:"",password:""},r.termsConditionsModal=function(){o.show({controller:a,templateUrl:"scripts/auth/views/terms-conditions.html"})},a.$inject=["$scope","$mdDialog"],r.createLocalUser=function(){return r.signUpForm.$invalid?(r.signUpForm.userName.$touched=!0,r.signUpForm.email.$touched=!0,void(r.signUpForm.password.$touched=!0)):(r.user.userName=r.user.userName.replace(/\s+/g,"-").toLowerCase(),void e.createLocalUser(r.user.email,r.user.password,r.user.userName,!0,r.user.subscriptions).then(function(){t.go("app.login"),n.warning("Please, confirm you email and then you will be able to log in",{timeOut:5e3})})["catch"](function(e){n.error(e.message),r.signUpForm.email.$invalid=!0,r.signUpForm.email.$touched=!0}))}}],link:function(e,t,n){e.companyName=i}}}])}(),function(){angular.module("auth").directive("svLoginForm",["toastr","url","$state","userAuth","AuthenticationServ","$stateParams","FbGenServ","companyName",function(e,t,n,r,o,i,a,s){return{replace:!0,templateUrl:"scripts/auth/directives/sv-login-form.html",scope:{headerTitle:"@",loginBtn:"@",registerAccount:"@",newUser:"@"},controller:["$scope",function(i){i.companyName=s,i.signIn=function(s,c){o.appLogin(s,c).then(function(e){if(i.user.subscriptions){var o={email:s,weekly:!0},c=t+"subscriptions/"+e.userName;a.saveObject(c,o).then(function(){})}r.profile.isManager()?n.go("app.manager.dashboard",{uid:r.key}):r.profile.isStaff()?n.go("app.user.listings",{uid:r.profile.userName}):n.go("app.user.account-settings",{uid:r.profile.userName})})["catch"](function(t){e.error(t.message)})}}],link:function(e,t,n){var r,o;e.user={email:"",password:""};var a=i.credentials.split("/");a.length>1&&(o=a[0],r=a[1]),o&&r&&e.signIn(o,r)}}}])}(),function(){angular.module("auth").directive("svAuthBtn",["userAuth","AuthenticationServ","AgentServ","$state","$mdMedia","toastr",function(e,t,n,r,o,i){return{templateUrl:"scripts/auth/directives/sv-auth-btn.html",replace:!0,link:function(i){i.goToDashboard=function(){"manager"===e.profile.role?r.go("app.manager.users",{uid:e.key}):r.go("app.user.account-settings",{uid:e.profile.userName})},i.isIe=n.isIe(),i.$watchCollection(function(){return e.profile},function(e,t){e!==t&&(i.user=e)}),i.loginProvider=function(n){t.authWithProvider(n).then(function(){e.profile&&e.profile.isManager()&&r.go("app.manager.users",{uid:e.key}),e.profile&&e.profile.isStaff()&&r.go("app.user.listings",{uid:e.profile.userName}),e.profile&&e.profile.isCustomer()&&r.go("app.user.user-bookmarks",{uid:e.profile.userName})})},i.logout=function(){t.logout(),i.user=null,r.go("app.home")},i.$watch(function(){return o("gt-md")},function(e){i.gtMd=e}),i.$watch(function(){return o("gt-sm")},function(e){i.gtSm=e}),i.$watch(function(){return o("sm")},function(e){i.sm=e})}}}])}(),function(){angular.module("auth").directive("svForgotPass",["$mdDialog","toastr","AuthenticationServ","companyName",function(e,t,n,r){return{replace:!0,templateUrl:"scripts/auth/directives/sv-forgot-pass.html",scope:{},link:function(o,i,a){function s(e,r){e.sendPasswordRecovery=function(r){n.resetPassword(r).then(function(){t.info("Password reset email sent successfully!"),e.hide(),e.user.email=""})["catch"](function(e){t.error("Error: ",e)})},e.hide=function(){r.hide()},e.cancel=function(){r.cancel()},e.answer=function(e){r.hide(e)}}o.companyName=r,o.showPasswordModal=function(){e.show({controller:s,templateUrl:"scripts/auth/views/password-recovery.html"})},s.$inject=["$scope","$mdDialog"]}}}])}(),function(){angular.module("auth").factory("ProfileLiveServ",["$q","url","users","$firebaseObject","GetAgentsInfoServ","ProfileExtentionServ","$firebaseArray","userAuth",function(e,t,n,r,o,i,a,s){var c,u=new Firebase(n);return{setBinding:function(t){return e(function(e,n){var a=r(u.child(t).child("profile"));a.$loaded(function(){function n(){s.profile=i.extend(a),s.key=t,c=a.$watch(function(e){s.profile=i.extend(a)}),e(!0)}"broker"==a.role?o.getByEmail(a.email).then(function(e){e&&(a.brokerId=e.$id,a.brokerPic=e.pic),n()}):n()})})},unbind:function(){c(),s.profile=null,s.key=null}}}])}(),function(){angular.module("auth").factory("AuthenticationServ",["$q","url","$firebaseAuth","ProfileServ","GetAgentsInfoServ",function(e,t,n,r,o){var i=new Firebase(t),a=n(i);return{checkUserStatus:function(){return e(function(e,t){var n=a.$getAuth();n?r.getProfile(n).then(function(t){"broker"==t.role?o.getByEmail(t.email).then(function(n){n&&(t.brokerId=n.$id,t.brokerPic=n.pic),e(t)}):e(t)}):e(null)})},authWithProvider:function(t){return e(function(e,n){a.$authWithOAuthPopup(t,{scope:"email"}).then(function(t){r.getProfile(t).then(function(t){"broker"==t.role?o.getByEmail(t.email).then(function(n){n&&(t.brokerId=n.$id,t.brokerPic=n.pic),e(t)}):e(t)})["catch"](function(e){n(e)})})["catch"](function(e){console.error("Authentication failed:",e)})})},appLogin:function(t,n){return e(function(e,o){a.$authWithPassword({email:t,password:n}).then(function(t){r.getProfile(t).then(function(t){t.unconfirmed?(a.$unauth(),o({message:"Please, confirm your email address"})):e(t)})["catch"](function(e){o(e)})})["catch"](function(e){o(e)})})},logout:function(){a.$unauth(),r.cleanProfile()},resetPassword:function(e){return a.$resetPassword({email:e})}}}])}(),function(){angular.module("sections.home").factory("AgentServ",["$window",function(e){return{isIe:function(){var t=e.navigator.userAgent;return t.indexOf("Trident")>-1||t.indexOf("MSIE")>-1?!0:!1}}}])}(),function(){angular.module("auth").factory("UserUniqueServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];if(o.auth&&o.auth.google&&o.auth.google.id===e.google.id)return o;if(o.auth&&o.auth.svet&&o.auth.svet.email.toLowerCase()===e.google.email.toLowerCase()){var i=r(c.child(o.$id));return i.$loaded().then(function(){i.auth.google=e,i.profile.avatar=i.profile.avatar?i.profile.avatar:e.google.cachedUserProfile.picture,i.$save()}),o}}}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];if(o.auth&&o.auth.facebook&&o.auth.facebook.id===e.facebook.id)return o;if(o.auth&&o.auth.svet&&o.auth.svet.email.toLowerCase()===e.facebook.email.toLowerCase()){var i=r(c.child(o.$id));return i.$loaded().then(function(){i.auth.facebook=e,i.profile.avatar=i.profile.avatar?i.profile.avatar:e.facebook.cachedUserProfile.picture.data.url,i.$save()}),o}}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.auth&&r.auth.svet&&r.auth.svet.email.toLowerCase()===e.password.email.toLowerCase())return r}}var c=new Firebase(n);return{findDbProfile:function(e,t){var n;if("google"===e.provider){n=i(e,t)}if("facebook"===e.provider){n=a(e,t)}if("password"===e.provider){n=s(e,t)}return n},isUserNameUnique:function(t){return e(function(e,r){var i=o(new Firebase(n));i.$loaded().then(function(){for(var n=0;n<i.length;n++){var o=i[n];o.profile&&o.profile.userName&&o.profile.userName.toLowerCase()===t.toLowerCase()&&r()}e()})})},isUserEmailUnique:function(t){return e(function(e,r){var i=o(new Firebase(n));i.$loaded().then(function(){for(var n=0;n<i.length;n++){var o=i[n];o.profile&&o.profile.email&&o.profile.email.toLowerCase()===t.toLowerCase()&&r()}e()})})}}}])}(),function(){angular.module("auth").factory("RequestServ",["$q","users","$firebaseObject","$firebaseArray",function(e,t,n,r){return{submitRequest:function(r){return e(function(e,o){var i=t+r,a=n(new Firebase(i));a.$loaded().then(function(){a.profile.requestCorporateSubmited={submitted:!0,submittedDate:moment().format("x"),accepted:!1,rejected:!1},a.$save().then(function(t){e(t)})})["catch"](function(e){console.log(userid+"does not exists"),o(e)})})},cancelRequest:function(r){return e(function(e,o){var i=t+r+"/profile/requestCorporateSubmited",a=n(new Firebase(i));a.$loaded().then(function(){a.$remove(),a.$save().then(function(t){e(t)})})["catch"](function(e){console.log(userid+"does not exists"),o(e)})})},acceptRequest:function(r){return e(function(e,o){var i=t+r+"/profile",a=n(new Firebase(i));a.$loaded().then(function(){a.requestCorporateSubmited.accepted=!0,a.requestCorporateSubmited.rejected=!1,a.requestCorporateSubmited.decisionDate=moment().format("x"),a.role="broker",a.$save().then(function(t){e(t)})})["catch"](function(e){console.log(userid+"does not exists"),o(e)})})},rejectRequest:function(r){return e(function(e,o){var i=t+r+"/profile",a=n(new Firebase(i));a.$loaded().then(function(){a.requestCorporateSubmited.rejected=!0,a.requestCorporateSubmited.accepted=!1,a.requestCorporateSubmited.decisionDate=moment().format("x"),a.role="customer",a.$save().then(function(t){e(t)})})["catch"](function(e){console.log(userid+"does not exists"),o(e)})})},getAllRequests:function(){return e(function(e,n){var o=r(new Firebase(t)),i=[];o.$loaded().then(function(){for(var t=0;t<o.length;t++){var n=o[t];n.profile.requestCorporateSubmited&&i.push(n)}e(i)})["catch"](function(e){console.log(userid+"does not exists"),n(e)})})}}}])}(),function(){angular.module("auth").factory("ProfileServ",["$q","$firebaseObject","FbGenServ","$firebaseArray","$firebaseAuth","url","users","ProfileLiveServ","UserUniqueServ",function(e,t,n,r,o,i,a,s,c){function u(t){var n={email:t,password:"123456"};return e(function(e,r){var i=o(g);i.$createUser(n).then(function(n){i.$resetPassword({email:t}).then(function(){e(n)})})["catch"](function(e){console.error(e),r(e)})})}function l(n,r,o){return e(function(e,i){var a=v(n,o);h.$add(a).then(function(n){r?e(n.key()):u(a.profile.email.toLowerCase()).then(function(r){var i=r.uid,a=t(n);a.$loaded().then(function(){a.auth.svet.id=i,o&&(a.profile.isConfirmed=!1),a.$save().then(function(){e(a.$id)})})})["catch"](function(e){console.error(e),i(e)})})})}function f(e){var t=e.toLowerCase();return t=t.replace(/ +?/g,"-")}function m(e,t){e.profile.email=t.google.email,e.profile.userName=f(t.google.displayName),e.profile.avatar=t.google.cachedUserProfile.picture,e.auth={google:t.google,svet:{email:e.profile.email}}}function d(e,t){e.profile.email=t.facebook.email,e.profile.userName=f(t.facebook.displayName),e.profile.avatar=t.facebook.cachedUserProfile.picture.data.url,e.auth={facebook:t.facebook,svet:{email:e.profile.email}}}function p(e,t){e.profile.email=t.email,e.profile.userName=t.userName,t.id=t.uid,t=_.omit(t,"uid","userName"),e.auth={svet:t}}function v(e,t){var n={};return n.profile={},"google"===e.provider&&m(n,e),"facebook"===e.provider&&d(n,e),e.provider||p(n,e),n.profile.role="customer",t&&(n.profile.unconfirmed=!0),n}var g=new Firebase(a),h=r(g);return{changeUserRole:function(n,r){return e(function(e,o){var i=t(g.child(n.$id).child("profile"));i.$loaded(function(){i.role===r?i.role="customer":i.role=r,i.$save().then(function(t){e(t.key())})})})},getProfile:function(t){return e(function(e,n){h.$loaded().then(function(){var n=c.findDbProfile(t,h);n?s.setBinding(n.$id).then(function(){e(n.profile)}):l(t,!0).then(function(t){s.setBinding(t).then(function(){e(t)})})})["catch"](function(e){n(e)})})},cleanProfile:function(){s.unbind()},createLocalUser:function(t,r,a,s,c){var u=o(g);return e(function(e,o){u.$createUser({email:t,password:r}).then(function(r){r.userName=a,r.email=t,u.$resetPassword({email:t}).then(function(){l(r,!0,s).then(function(){if(c){var o={email:t},a=i+"subscriptions/"+r.userName;n.saveObject(a,o).then(function(){e(r)})}}),console.log("Password reset email sent successfully!")})["catch"](function(e){console.error("Error: ",e)})})["catch"](function(e){o(e)})})}}}])}(),function(){angular.module("auth").factory("ProfileExtentionServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){return{extend:function(e){return e.isManager=function(){return"manager"===this.role},e.isStaff=function(){return"broker"===this.role},e.isCustomer=function(){return"customer"===this.role},e.isEditor=function(){return"editor"===this.role},e.isAuthor=function(){return"author"===this.role||"editor"===this.role},e.isOnlyAuthor=function(){return"author"===this.role},e}}}])}(),function(){angular.module("auth").filter("Groups",function(){return function(e,t){return e&&0!==e.length?"all"===t?_.reject(e,{profile:{role:"manager"}}):_.filter(e,function(e){return e.profile.role===t&&"manager"!==e.profile.role}):void 0}})}(),function(){angular.module("auth").directive("svFbGoogleRules",function(){return{replace:!0,templateUrl:"scripts/auth/directives/sv-fb-google-rules.html",link:function(e,t,n){}}})}(),function(){angular.module("auth.user",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.user",{"abstract":!0,url:"/:uid",resolve:{userRights:["$q","$stateParams","userPromise","userAuth",function(e,t,n,r){var o=t.uid;r.profile.userName||n.userName;return e(function(e,t){r&&r.profile.userName===o?e():t("You do not have enough privileges to view that page!")})}]},controller:"UserCtrl as user",templateUrl:"scripts/auth/user/views/userCtrl.html"}).state("app.user.blogs",{url:"/blogs",controller:"UserNewsCtrl as UserNews",templateUrl:"scripts/auth/user/views/user-newsCtrl.html"}).state("app.user.dashboard",{url:"/dashboard",controller:"UserDashboardCtrl as userDashboard",templateUrl:"scripts/auth/user/views/userDashboardCtrl.html"}).state("app.user.author-drafts",{url:"/author-drafts",controller:"AuthorDraftsCtrl as authorDrafts",templateUrl:"scripts/auth/user/views/author-draftsCtrl.html"}).state("app.user.social",{url:"/social",controller:"UserSocialCtrl as userSocial",templateUrl:"scripts/auth/user/views/userSocialCtrl.html"}).state("app.user.account-settings",{url:"/account-settings",controller:"AccountSettingsCtrl",templateUrl:"scripts/auth/user/views/account-settingsCtrl.html"}).state("app.user.user-bookmarks",{url:"/user-bookmarks",controller:"UserBookmarksCtrl",templateUrl:"scripts/auth/views/user-bookmarksCtrl.html"}).state("app.user.user-subscriptions",{url:"/user-subscriptions",controller:"UserSubscriptionsCtrl",templateUrl:"scripts/auth/views/user-subscriptionsCtrl.html"}).state("app.user.user-reviews",{url:"/user-reviews",controller:"UserReviewsCtrl",templateUrl:"scripts/auth/views/user-reviewsCtrl.html"})}])}(),function(){angular.module("auth.user").controller("AccountSettingsCtrl",["$scope",function(e){}])}(),function(){angular.module("auth").controller("UserReviewsCtrl",["$scope",function(e){}])}(),function(){angular.module("auth").controller("UserBookmarksCtrl",["$scope","FbGenServ","url","userAuth",function(e,t,n,r){t.getAssync(n+"bookmarks/"+r.profile.userName).then(function(t){var n=_.pluck(t,"$id");e.bookmarks=n})}])}(),function(){angular.module("auth.user").controller("UserListingsCtrl",["$scope","SearchSaleServ","userAuth",function(e,t,n){t.getBrokerHomes(n.profile.email).then(function(t){e.brokerHomes=t})}])}(),function(){angular.module("auth.user").controller("UserNewsCtrl",["$scope","userAuth",function(e,t){e.user=t.profile}])}(),function(){angular.module("auth.user").controller("AuthorDraftsCtrl",["$scope",function(e){}])}(),function(){angular.module("auth.user").directive("svBrokerListingsTabs",function(){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-broker-listings-tabs.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("auth.user").directive("svChangePassword",["userAuth","$firebaseAuth","url","toastr",function(e,t,n,r){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-change-password.html",scope:{},link:function(o,i,a){function s(){o.password={val:""},o.newPassword={val:""},o.passwordForm.$pristine=!0}o.authObj=t(new Firebase(n)),o.changePassword=function(){return o.password&&o.newPassword?void o.authObj.$changePassword({email:e.profile.email,oldPassword:o.password.val,newPassword:o.newPassword.val}).then(function(){r.info("Password changed successfully!"),s()})["catch"](function(e){r.error("Current Password is incorrect")}):void r.error("Please, fill current and new password fields")}}}}])}(),function(){angular.module("auth.user").controller("UserCtrl",["$scope","userAuth",function(e,t){e.brokerId=t.profile.brokerId,e.user=t.profile,e.cid=e.user.userName;var n=e.user.isStaff();e.isBroker=n;var r=e.user.isCustomer();e.isCustomer=r;var o=e.user.isManager();e.isManager=o}])}(),function(){angular.module("auth.user").controller("UserDashboardCtrl",["$scope",function(e){}])}(),function(){angular.module("auth.user").controller("UserSocialCtrl",["$scope",function(e){}])}(),function(){angular.module("auth.user").controller("ProfileSettingsCtrl",["$scope",function(e){}])}(),function(){angular.module("auth.user").directive("svUserSocialTabs",function(){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-user-social-tabs.html",scope:{},link:function(e,t,n){var r=[],o=null,i=null;e.tabs=r,e.selectedIndex=0,e.$watch("selectedIndex",function(e,t){i=o,o=r[e]})}}})}(),function(){angular.module("auth.user").directive("svUserDropdownMenu",["avatar","alex","userAuth",function(e,t,n){return{templateUrl:"scripts/auth/user/directives/sv-user-dropdown-menu.html",link:function(r,o,i){n&&n.profile&&(r.brokerId=n.profile.brokerId,r.user=n.profile),r.defaultAvatar=e,r.alexAvatar=t}}}])}(),function(){angular.module("auth").directive("svUserAdTabs",["userAuth","$state",function(e,t){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-user-ad-tabs.html",scope:{},link:function(n,r,o){n.$watch(function(){return t.current},function(e,t){var r=_.last(e.name.split("."));n.selectedIndex="promotion"===r?0:1}),n.user=e.profile}}}])}(),function(){angular.module("auth.user").directive("svUsersList",["toastr","avatar","UsersServ","ProfileServ",function(e,t,n,r){return{replace:!0,require:"^svManagerUsersTabs",templateUrl:"scripts/auth/user/directives/sv-users-list.html",scope:{groupFilter:"@"},link:function(o,i,a,s){o.avatar=t,o.users=n.allUsersList(),o.users.$loaded(function(){var e=_.countBy(o.users,function(e){return e.profile.role});e.all=_.filter(o.users,function(e){return"manager"!==e.profile.role}).length,s.userTypesCount(e),o.users.$watch(function(){var e=_.countBy(o.users,function(e){return e.profile.role});e.all=_.filter(o.users,function(e){return"manager"!==e.profile.role}).length,s.userTypesCount(e)})}),o.changeUserRole=function(t,n){r.changeUserRole(t,n).then(function(){e.info("role has been changed")})}}}}])}(),function(){angular.module("auth.user").directive("svBusinessAccountRequests",["RequestServ","toastr","userAuth",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-business-account-requests.html",scope:{},link:function(n,r,o){e.getAllRequests().then(function(e){n.users=e}),n.accept=function(n){e.acceptRequest(n.$id).then(function(){t.info("request has been accepted")})},n.reject=function(n){e.rejectRequest(n.$id).then(function(){t.info("request has been rejected")})}}}}])}(),function(){angular.module("auth.user").directive("svUserPersonalInfo",["toastr","userAuth","UsersServ",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-user-personal-info.html",scope:{},link:function(r,o,i){r.userName={value:angular.copy(t.profile.userName),label:"userName"},r.oldUserName=t.profile.userName,r.user=t.profile,r.saveUserName=function(o,i){i&&r.personalInfoForm.$valid&&(o.value=o.value.replace(/\s+/g,"-").toLowerCase(),n.saveUserProperty(o,t.key).then(function(t){e.success("Saved")}))}}}}])}(),function(){angular.module("auth.user").directive("svUserProfileSummary",["userAuth",function(e){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-user-profile-summary.html",scope:{},link:function(t,n,r){t.user=e.profile}}}])}(),function(){angular.module("auth.user").directive("svBrokerDashboardTabs",["FbGenServ","toastr","homesUrl","$state","$location","$stateParams","$timeout","$q","SearchSaleServ","userAuth","GetAgentsInfoServ","avatarBroker",function(e,t,n,r,o,i,a,s,c,u,l,f){
return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-broker-dashboard-tabs.html",scope:{},link:function(o,s,c){o.editState=!1,o.brokerId=i.id,o.brokerIdAuth=u.profile?u.profile.brokerId:null,o.hasEditAccess=o.brokerId===o.brokerIdAuth,o.showEditBtn=function(){return 0!==o.selectedIndex?!1:u&&u.profile&&o.brokerId===u.profile.brokerId?!0:!1},o.editProfile=function(){a(function(){o.editState=!0},10)},o.$on("broker:changed",function(e,t){o.saveBrokerProfile(t)}),o.saveBrokerProfile=function(r){o.editState=!1,e.saveObject(n+"agents/"+u.profile.brokerId,r).then(function(e){t.success("Changes have been saved"),o.broker=r})},o.avatarBroker=f,l.getByKey(o.brokerId).then(function(e){o.broker=e});var m=_.last(r.current.name.split("."));switch(m){case"profile":o.selectedIndex=0;break;case"listings":o.selectedIndex=1;break;case"blogs":o.selectedIndex=2;break;case"reviews":o.selectedIndex=3;break;case"endorsements":o.selectedIndex=4;break;default:o.selectedIndex=0}o.key=u.key,o.user=u.profile,o.$watch("selectedIndex",function(e,t){switch(e){case 0:r.go("^.profile");break;case 1:r.go("^.listings");break;case 2:r.go("^.blogs");break;case 3:r.go("^.reviews");break;case 4:r.go("^.endorsements");break;default:r.go("^.profile")}})}}}])}(),function(){angular.module("auth").directive("svAuthorArticles",["userAuth","ArticlesServ","toastr","$state",function(e,t,n,r){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-author-articles.html",scope:{},controller:["$scope",function(e){var r=this;r.removeOneArticle=function(e){t.remove(e).then(function(){n.info("article has been deleted")})}}],link:function(n,o,i){r.current.name;n.$watch(function(){return r.current.name},function(e,t){e&&"app.user.news.blogs"===e?n.selectedIndex=1:n.selectedIndex=0}),n.user=e.profile;var a=t.all();a.$loaded().then(function(){n.loaded=!0,n.articles=a,a.$watch(function(){n.articles=a})})}}}])}(),function(){angular.module("auth.user").directive("svUserProfileNav",["userAuth",function(e){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-user-profile-nav.html",scope:{},link:function(t,n,r){t.user=e.profile}}}])}(),function(){angular.module("auth.manager",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.manager",{url:"/manager/:uid","abstract":!0,resolve:{rights:["$q","$stateParams","userAuth","userPromise",function(e,t,n,r){var o=t.uid;return e(function(e,t){n.profile&&n.profile.role&&"manager"===n.profile.role&&n.profile.userName===o?e():t("You do not have enough privileges to view that page!")})}]},controller:"ManagerCtrl as manager",templateUrl:"scripts/auth/manager/views/managerCtrl.html"}).state("app.manager.dashboard",{url:"/dashboard",controller:"ManagerDashboardCtrl as managerDashboard",templateUrl:"scripts/auth/manager/views/manager-dashboardCtrl.html"}).state("app.manager.users",{url:"/users",controller:"ManagerUsersCtrl as managerUsers",templateUrl:"scripts/auth/manager/views/manager-usersCtrl.html"}).state("app.manager.ad",{url:"/advertisement",controller:"ManagerAdCtrl as managerAd",templateUrl:"scripts/ad/promotion/views/manager-adCtrl.html"}).state("app.manager.ad.start",{url:"/manage-promotion/:id",controller:"NewPromotionByManagerCtrl",templateUrl:"scripts/ad/promotion/views/new-promotion-by-managerCtrl.html"})}])}(),function(){angular.module("auth.manager").controller("ManagerCtrl",["$scope","$rootScope",function(e,t){}])}(),function(){angular.module("auth.manager").controller("ManagerDashboardCtrl",["$scope",function(e){console.log("run here ManagerDashboardCtrl.js")}])}(),function(){angular.module("auth.manager").controller("ManagerUsersCtrl",["$scope","companyName",function(e,t){e.companyName=t}])}(),function(){angular.module("auth.manager").directive("svManagerDashboardTabs",function(){return{replace:!0,templateUrl:"scripts/auth/manager/directives/sv-manager-dashboard-tabs.html",scope:{},link:function(e,t,n){var r=[],o=null,i=null;e.tabs=r,e.selectedIndex=0,e.$watch("selectedIndex",function(e,t){i=o,o=r[e]})}}})}(),function(){angular.module("auth.manager").directive("svManagerDropdown",["userAuth",function(e){return{templateUrl:"scripts/auth/manager/directives/sv-manager-dropdown.html",link:function(t,n,r){t.key=e.key,t.user=e.profile}}}])}(),function(){angular.module("auth.manager").directive("svManagerProfileNav",function(){return{replace:!0,templateUrl:"scripts/auth/manager/directives/sv-manager-profile-nav.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("auth.manager").directive("svManagerProfileSummary",function(){return{replace:!0,templateUrl:"scripts/auth/manager/directives/sv-manager-profile-summary.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("auth.manager").directive("svManagerUsersTabs",function(){return{replace:!0,templateUrl:"scripts/auth/manager/directives/sv-manager-users-tabs.html",controller:["$scope",function(e){this.userTypesCount=function(t){e.count=t}}],scope:{},link:function(e,t,n){e.selectedIndex=0}}})}(),function(){angular.module("auth.manager").directive("svManagerBusinessAdList",["AdServ","userAuth","toastr",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/manager/directives/sv-manager-business-ad-list.html",scope:{},link:function(r,o,i){r.ads=e.all(),r.user=t.profile,r.removeAd=function(t){e.removeAd(t).then(function(){n.warning("You campaign has been deleted")})}}}}])}(),function(){angular.module("auth.manager").factory("UsersServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){var i=new Firebase(n);return{allUsersList:function(){var e=o(i);return e},allCustomersList:function(){return e(function(e,t){var n=o(i);n.$loaded(function(){var t=_.filter(n,function(e){return"customer"===e.profile.role});e(t)})})},saveUserProperty:function(t,o){return e(function(e,i){var a=n+o+"/profile",s=r(new Firebase(a));s.$loaded().then(function(){s[t.label]=t.value,s.$save().then(function(t){e(t)})})})}}}])}(),function(){angular.module("auth.notifications",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){angular.module("auth.notifications").factory("TestMeToServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){return{get:function(){},get:function(){return e(function(e,t){})}}}])}(),function(){angular.module("auth.notifications").filter("toArray",function(){return function(e){var t=[];return _.forOwnRight(e,function(e,n){e.timestamp&&(e.$id=n,t.push(e))}),t}})}(),function(){angular.module("auth.notifications").directive("svNoticeIcon",function(){return{link:function(e,t,n){var r=t.find("#svi");e.$watch("hasNotices",function(t,n){t&&e.$apply(function(){r.addClass("icon--red2")})})}}})}(),function(){angular.module("auth.notifications").directive("svDropAlign",["$mdMedia",function(e){return{link:function(t,n,r){t.$watch(function(){return e("sm")},function(e){e?console.log(" not sm"):(n.removeClass("dropdown-menu--left"),n.addClass("dropdown-menu--right"),n.css({"background-color":"500px"}))})}}}])}(),function(){angular.module("auth.notifications").factory("NotificationsServ",["$q","url","users","$firebaseObject","$firebaseArray","userAuth",function(e,t,n,r,o,i){function a(t,r,i,a){var s=[];return angular.forEach(t,function(e){var t=r[e];if(t.profile.role===a){var c=new Firebase(n+e+"/profile/notifications"),u=o(c),l=u.$add(i);s.push(l)}}),e.all(s)}new Firebase(n);return{markNotificationOpened:function(t){var o=i.key,a=n+o+"/profile/notifications/"+t;return e(function(e,t){var n=r(new Firebase(a));n.$loaded().then(function(){n.opened=!0,n.$save().then(function(){e()})})})},markAllNotificationsOpened:function(){var t=i.key,r=n+t+"/profile/notifications/";return e(function(e,t){var n=o(new Firebase(r));n.$loaded().then(function(){n.forEach(function(e){e.opened=!0,n.$save(e)})})})},addToCustomers:function(t){return e(function(e,o){var i=r(new Firebase(n));i.$loaded().then(function(){var n=_.chain(i).keysIn().filter(function(e){return!_.startsWith(e,"$")&&"forEach"!==e}).value();a(n,i,t,"customer").then(function(t){e(t)})["catch"](function(e){o(e)})})})},addToManagers:function(t){return e(function(e,o){var i=r(new Firebase(n));i.$loaded().then(function(){var n=_.chain(i).keysIn().filter(function(e){return!_.startsWith(e,"$")&&"forEach"!==e}).value();a(n,i,t,"manager").then(function(t){e(t)})["catch"](function(e){o(e)})})})}}}])}(),function(){angular.module("ad.promotion",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){angular.module("ad.promotion").directive("svAdBannerUpload",["ImageValidationServ","toastr",function(e,t){return{templateUrl:"scripts/ad/promotion/directives/sv-ad-banner-upload.html",link:function(n,r,o){n.$watchCollection("$flow.files",function(i){if(i&&i.length){var a=_.last(i);n.$flow.files[0]=a;var s=a,c=new FileReader;c.readAsDataURL(s.file),c.onload=function(i){var a=new Image;a.onload=function(){var c=s.size,u=a.width,l=a.height,f={size:c,width:u,height:l},m=e.validate(f,o);m.length?(m.forEach(function(e){t.error(e)}),n.$flow.files=[],r.trigger("blur")):n.ad.img=i.target.result};var c=i.target.result;a.src=c}}})}}}])}(),function(){angular.module("ad.promotion").directive("svS3Upload",["Upload","$timeout","ImgBase64Serv","userAuth","$rootScope",function(e,t,n,r,o){return{templateUrl:"scripts/ad/promotion/directives/sv-s3-upload.html",link:function(e,t,o){e.upload=function(t){t&&n.postUrl("/broker-thumb",t,r.profile.brokerId).then(function(t){e.brokerModal.pic=t,e.saveProfileModalImg(e.brokerModal.pic),e.hide()})},e.$watch("files",function(){e.upload(e.files)})}}}])}(),function(){angular.module("ad.promotion").directive("svCustomerAvatar",["avatar",function(e){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-customer-avatar.html",scope:{customer:"="},link:function(t,n,r){t.defaultAvatar=e}}}])}(),function(){angular.module("ad.promotion").directive("svCustomersDropdown",["avatar",function(e){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-customers-dropdown.html",scope:{customers:"=",selectedCustomer:"="},link:function(t,n,r){t.defaultAvatar=e,t.setSelectedCustomer=function(e){t.selectedCustomer=e,console.log("run here sv-customers-dropdown.js")}}}}])}(),function(){angular.module("ad.promotion").controller("NewPromotionByManagerCtrl",["$scope","$stateParams",function(e,t){e.id=t.id}])}(),function(){angular.module("auth").controller("CustomerAdCtrl",["$scope","userAuth",function(e,t){e.user=t.profile}])}(),function(){angular.module("auth").controller("ManagerAdCtrl",["$scope",function(e){}])}(),function(){angular.module("ad.promotion").controller("StartCampaignCtrl",["$scope","$stateParams",function(e,t){e.id=t.id}])}(),function(){angular.module("ad.promotion").directive("svOneCampaignThumb",["userAuth",function(e){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-one-campaign-thumb.html",scope:{ad:"=",removeAd:"&"},link:function(t,n,r){t.user=e.profile}}}])}(),function(){angular.module("ad.promotion").directive("svBanner",function(){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-banner.html",scope:{imgUrl:"@",linkUrl:"@",imgAlt:"@"},link:function(e,t,n){}}})}(),function(){angular.module("ad.promotion").directive("svCustomPaperHeadAd",function(){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-custom-paper-head-ad.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("ad.promotion").directive("svHomeBanner",["AdServ","$timeout","$mdMedia",function(e,t,n){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-home-banner.html",scope:{place:"@"},link:function(r,o,i){r.arrowShift,r.$watch(function(){return n("sm")},function(e){e&&(r.arrowShift=35)}),r.$watch(function(){return n("gt-sm")},function(e){e&&(r.arrowShift=47)}),r.$watch(function(){return n("gt-md")},function(e){e&&(r.arrowShift=57)}),r.$watch(function(){return n("gt-lg")},function(e){e&&(r.arrowShift=67)}),r.adIndex=0,e.allArrShuffled().then(function(t){console.log(t),r.ads=t,r.ad=r.ads[r.adIndex],r.currentAd=r.ads[r.adIndex].banner,e.increaseShow(r.ads[r.adIndex].$id)});var a;r.showPrevAd=function(){a=r.adIndex,a--,a=0>a?r.ads.length-1:a,r.adIndex=a,t(function(){r.ad=r.ads[r.adIndex],r.currentAd=r.ads[r.adIndex].banner},700),e.increaseShow(r.ads[r.adIndex].$id)},r.showNextAd=function(){a=r.adIndex,a++,a=a===r.ads.length?0:a,r.adIndex=a,t(function(){r.ad=r.ads[r.adIndex],r.currentAd=r.ads[r.adIndex].banner},700),e.increaseShow(r.ads[r.adIndex].$id)}}}}])}(),function(){angular.module("ad.promotion").directive("svStartCampaignForm",["AdServ","$state","toastr","userAuth","UsersServ",function(e,t,n,r,o){return{templateUrl:"scripts/ad/promotion/directives/sv-start-campaign-form.html",scope:{id:"="},link:function(i,a,s){i.user=r.profile,i.user.isManager()&&o.allCustomersList().then(function(e){i.customers=e}),i.id?i.ad=e.getObj(i.id):i.ad={name:"Campaign Name "+_.random(1,99),banner:""},i.addBusinessAd=function(r,o,a){if(a){if(!o)return void(i.id?e.updateAd(i.ad).then(function(e){t.go("^"),n.info("Your Ad Campaign has been saved")}):e.saveAd(i.ad).then(function(e){t.go("^"),n.info("Your Ad Campaign has been saved")}));var s=new FileReader;s.readAsDataURL(o.file),s.onload=function(r){i.ad.banner=r.target.result,i.id?e.updateAd(i.ad).then(function(e){t.go("^"),n.info("Your Ad Campaign has been saved")}):e.saveAd(i.ad,i.customers).then(function(e){t.go("^"),n.info("Your Ad Campaign has been saved")})}}}}}}])}(),function(){angular.module("ad.promotion").directive("svBusinessAd",["AdServ","toastr","userAuth",function(e,t,n){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-business-ad.html",scope:{},link:function(r,o,i){r.ads=e.all(),r.user=n.profile,r.removeAd=function(n){e.removeAd(n).then(function(){t.success("You campaign has been deleted")})}}}}])}(),function(){angular.module("ad.promotion").factory("AdServ",["$q","url","ads","$firebaseObject","$firebaseArray","userAuth",function(e,t,n,r,o,i){function a(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.profile.userName===t)return r.$id}}return{saveAd:function(t,r){return e(function(e,s){if(t.customerUserName)t.customerKey=a(r,t.customerUserName);else{i.profile;t.customerKey=i.key,t.customerUserName=i.profile.userName}t.timestamp=moment().format("x"),t.shows={unique:0,total:0};var c=o(new Firebase(n));c.$add(t).then(function(t){e(t.key())})})},removeAd:function(t){return e(function(e,o){var i=n+t.$id,a=r(new Firebase(i));a.$remove().then(function(t){e(t.key())})})},updateAd:function(t){return e(function(e,o){var i=n+t.$id,a=r(new Firebase(i));a.$loaded().then(function(){a=_.extend(a,t),a.$save().then(function(t){e(t.key())})})})},increaseShow:function(t){return e(function(e,o){var i=n+t,a=r(new Firebase(i));a.$loaded().then(function(){a.shows.total+=1,a.shows.unique+=1,a.$save().then(function(t){e(t.key())})})})},allArrShuffled:function(){var t=n;return e(function(e,n){var r=o(new Firebase(t));r.$loaded().then(function(){var t=_.shuffle(r);e(t)})})},all:function(){var e=n,t=o(new Firebase(e));return t},getObj:function(e){var t=n+e,o=r(new Firebase(t));return o}}}])}(),function(){angular.module("ad.promotion").filter("userList",["userAuth",function(e){return function(t){return e&&t&&0!==t.length?e.profile&&e.profile.isManager()?t:_.filter(t,function(t){return t.customerKey==e.key}):void 0}}])}(),function(){angular.module("article",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.blog",{url:"/blogs/:id",controller:"ArticleCtrl as article",templateUrl:"scripts/article/views/articleCtrl.html"}).state("app.user.create-article",{url:"/manage-article/:artType/:artId",controller:"CreateArticleCtrl as createArticle",onEnter:["$rootScope",function(e){e.$broadcast("image-search-show")}],onExit:["$rootScope",function(e){e.$broadcast("image-search-hide")}],templateUrl:"scripts/article/views/create-articleCtrl.html"})}])}(),function(){angular.module("article").directive("svOneComment",["userAuth","CommentsServ",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-one-comment.html",scope:{articleKey:"@",comment:"=",removeComment:"&"},link:function(n,r,o){n.editState=!1,n.saveCommentChanges=function(){t.updateComment(n.articleKey,n.comment).then(function(e){n.editState=!1})},n.isEditable=function(){return e.profile?e.profile.isManager()?!0:e.profile.isEditor()?!0:n.comment.user===e.key?!0:void 0:!1}}}}])}(),function(){angular.module("article").factory("CommentsServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){return{saveComment:function(n,r){var i=t+"articles/"+n+"/comments";return e(function(e,t){var n=o(new Firebase(i));n.$add(r).then(function(t){console.log(t),e(t)})})},updateComment:function(n,o){var i=t+"articles/"+n+"/comments/"+o.$id;return e(function(e,t){var n=r(new Firebase(i));n.$loaded().then(function(){n.body=o.body,n.$save().then(function(t){e(t.key())})})})},removeComment:function(n,o){var i=t+"articles/"+n+"/comments/"+o;return e(function(e,t){var n=r(new Firebase(i));n.$loaded().then(function(){n.$remove().then(function(t){e(t.key())})})})}}}])}(),function(){angular.module("auth.user").controller("CreateArticleCtrl",["$scope","$stateParams",function(e,t){e.artId=t.artId,e.artType=t.artType}])}(),function(){angular.module("article").controller("ArticleCtrl",["$scope","ArticlesServ","$stateParams","userAuth","SvHtmlValidatorServ","$timeout",function(e,t,n,r,o,i){e.user=r.profile,e.userKey=r.key;var a=n.id;t.get(a).$loaded().then(function(t){e.article=o.cleanArticle(t)})}])}(),function(){angular.module("article").directive("svHtmlCleaner",function(){return{link:function(e,t,n){e.$watch("article.body",function(e,t){if(e!==t){var n='style="color: rgb(1, 1, 1);float: none;background-color: rgb(255, 255, 255);">';n.replace(/style=".+/g)}})}}})}(),function(){angular.module("article").directive("svReadFile",["$parse",function(e){return{restrict:"A",scope:!1,link:function(t,n,r){var o=e(r.svReadFile);n.on("change",function(e){var n=new FileReader;n.onload=function(e){t.$apply(function(){o(t,{$fileContent:e.target.result})})},n.readAsText((e.srcElement||e.target).files[0],"cp866")})}}}])}(),function(){angular.module("article").directive("svReadTxt",function(){return{replace:!0,templateUrl:"scripts/article/directives/sv-read-txt.html",scope:{body:"="},link:function(e,t,n){e.showContent=function(t){var n;t.indexOf("\r\n\r\n")>-1&&(n=t.split("\r\n\r\n")),t.indexOf("\r\n \r\n")>-1&&(n=t.split("\r\n \r\n"));var r,o,i=$("<div></div>");_.forEach(n,function(e,t){r=e.replace(/\r\n/g," "),o="<p><br/></p><p>"+r+"</p>",i.append(o)}),e.body=i.html()}}}})}(),function(){angular.module("article").directive("svAuthorHumanize",function(){return{require:"?^ngModel",link:function(e,t,n,r){r.$formatters.push(function(e){if(e){var t=_.map(e.split("-"),function(e){return _.capitalize(e)}).join(" ");return t}})}}})}(),function(){angular.module("article").directive("svAuthorArticleLink",["userAuth","$state",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-author-article-link.html",scope:{article:"=",index:"=",isRank:"="},link:function(n,r,o){n.editArticle=function(n){t.go("app.user.create-article",{uid:e.profile.userName,artId:article.fbkey})}}}}])}(),function(){angular.module("article").directive("svUrlDecode",function(){return{priority:1001,require:"?^ngModel",link:function(e,t,n,r){n.ngModel;r.$formatters.push(function(e){return e&&e&&_.isString(e)?e.replace(/&#34;/g,'"'):void 0})}}})}(),function(){angular.module("article").directive("svDeleteArticleBtn",["toastr","FbGenServ","url",function(e,t,n){return{replace:!0,require:"?^svBrokerBlogs",templateUrl:"scripts/article/directives/sv-delete-article-btn.html",scope:{articleKey:"@",i:"@"},link:function(e,t,n,r){e.removeArticle=function(){r.removeBlog(e.articleKey,e.i)}}}}])}(),function(){angular.module("article").directive("svImageInclude",["$rootScope",function(e){return{templateUrl:"scripts/article/directives/sv-image-include.html",link:function(t,n,r){t.includeImgToArticle=function(){e.$broadcast("include-image",{url:t.url})}}}}])}(),function(){angular.module("article").directive("svOneArticleMenu",["userAuth",function(e){return{replace:!0,templateUrl:"scripts/article/directives/sv-one-article-menu.html",scope:{news:"="},link:function(t,n,r){t.user=e,t.user.key=e.key}}}])}(),function(){angular.module("article").directive("svEditArticleBtn",["userAuth",function(e){return{replace:!0,templateUrl:"scripts/article/directives/sv-edit-article-btn.html",scope:{article:"="},link:function(t,n,r){t.user=e.profile}}}])}(),function(){angular.module("article").directive("svArticleStatus",["ArticlesServ","$rootScope",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-article-status.html",scope:{article:"=",key:"=",property:"@",chBox:"=",lbl:"@"},link:function(n,r,o){n.changeArticleStatus=function(n){e.computeNewsOrder(n).then(function(){t.$broadcast("homeNewsChanged")})}}}}])}(),function(){angular.module("article").directive("svImageSearch",["ImageSearchServ","$rootScope",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-image-search.html",scope:{insertImage:"&"},link:function(n,r,o){var i="";t.summary?i=t.summary.replace(/&#34;/g,'"'):t.title&&(i=t.title.replace(/&#34;/g,'"')),n.q={data:i},n.runGoogleSearch=function(t){if(t){if(t.indexOf("http")>-1)return n.images=[],void n.images.push({url:t});t.split(" ");e.fetch(t).then(function(e){var t=_.pluck(e,"data"),r=_.map(t,function(e){return e.responseData.results}),o=[];r.forEach(function(e){o=_.union(o,e)});var i=_.map(o,function(e){return e.url}),a=_.groupBy(i,function(e){return e}),s=_.sortBy(a,function(e){return-e.length}),c=_.take(s,10);n.images=_.map(c,function(e){return{url:e[0]}})})}}}}}])}(),function(){angular.module("article").config(["$provide",function(e){e.decorator("taOptions",["taRegisterTool","$delegate",function(e,t){return t.toolbar=[["h1","h2","h3","h4","h5","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","indent","outdent"],["html","insertImage","insertLink","wordcount","charcount"]],t}])}]).value("svTextAngular",{selected:!1}).directive("svTextPad",["url","svTextAngular",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-text-pad.html",scope:{body:"="},link:function(e,n,r){var o=n.find(".ta-scroll-window > .ta-bind >p > img");o.css({width:"280px","max-width":"280px"});var i=n.find("#textPad")[0].classList;e.$watchCollection(function(){return i},function(e,n){e&&e!==n&&(t.selected=_.contains(e,"focussed"))});var a=n.find("div");a.css({"margin-bottom":"4px"});var s=n.find("button, #toolbarWC, #toolbarCC");s.css({"font-size":"12px",display:"inline-block",padding:"6px 12px"});var c=n.find("button");c.css({"float":"left",color:"#757575"}),e.myContent=""}}}])}(),function(){angular.module("auth").directive("svCreateArticleBtn",function(){return{replace:!0,templateUrl:"scripts/article/directives/sv-create-article-btn.html",scope:{isBlog:"="},link:function(e,t,n){}}})}(),function(){angular.module("article").directive("svAddComment",["userAuth","CommentsServ",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-add-comment.html",scope:{articleKey:"="},link:function(n,r,o){n.user=e.profile,n.user&&(n.comment={body:"",user:e.key,timestamp:moment().format("x"),avatar:n.user.avatar||""}),n.submitComment=function(){t.saveComment(n.articleKey,n.comment).then(function(e){n.comment.body=""})}}}}])}(),function(){angular.module("article").directive("svImageUpload",["ImageValidationServ","$rootScope","taSelection","toastr","svTextAngular","$timeout",function(e,t,n,r,o,i){return{templateUrl:"scripts/article/directives/sv-image-upload.html",link:function(a,s,c){function u(e){var r=t.lastSelection,o="<img src="+e+' contenteditable="true" allowfullscreen="true" frameborder="0" ng-style="padding:5px" />';n.insertHtml(o,void 0,r),a.$flow.files=[],s.trigger("blur")}s.find("#textPad");a.$watch(function(){return o.selected},function(e,t){e===!1?i(function(){a.svTextAngularelected=e},100):a.svTextAngularelected=e}),a.$parent.ad||a.$watchCollection("$flow.files",function(t){if(t&&t.length){var n=_.last(t);a.$flow.files[0]=n;var o=n,i=new FileReader;i.readAsDataURL(o.file),i.onload=function(t){if(a.article){var n=t.target.result,i=new Image;i.src=n,i.onload=function(){var n=o.size,l=i.width,f=i.height,m={size:n,width:l,height:f},d=e.validate(m,c);d.length?(d.forEach(function(e){r.error(e)}),a.$flow.files=[],s.trigger("blur")):u(t.target.result)}}a.event&&(a.event.img=t.target.result)}}})}}}])}(),function(){angular.module("article").directive("svNewArticleForm",["$sce","$rootScope","SvHtmlValidatorServ","$state","toastr","ArticlesServ","userAuth",function(e,t,n,r,o,i,a){return{replace:!0,templateUrl:"scripts/article/directives/sv-new-article-form.html",link:function(s,c,u){s.safeParsing=function(t){return e.trustAsHtml(t)},s.$watch("articleForm",function(e,t){e&&(s.isFormChanged=e.$dirty)}),s.$watchGroup(["article.title","article.summary"],function(e,n){t.title=e[0],t.summary=e[1]}),s.user=a.profile,s.saveArticle=function(e,t){if(t.$valid){var a=n.cleanArticle(s.article);i.add(a,e).then(function(e){r.go(r.current.name,{artId:e.$id}),s.article.$id=e.$id,o.success("Your changes are successfully saved")},function(e){console.log(e)})}else{console.log(str);for(var c="Please fill required fields:\n",u=0;u<t.$error.required.length;u++){var l=t.$error.required[u];c+=str(l.$name,"titleize")+"\n"}o.error(c)}},s.cancelArticle=function(e){r.go("app.user.blogs")},s.artId?s.article=i.get(s.artId):s.article={isBlog:"blog"===s.artType,author:a.profile.isEditor()?" ":a.profile.userName}}}}])}(),function(){angular.module("article").directive("svOneArticle",["userAuth","CommentsServ",function(e,t){return{replace:!0,scope:{news:"="},templateUrl:"scripts/article/directives/sv-one-article.html",link:function(n,r,o){n.params={sectionName:n.news.section},n.user=e.profile,n.rating1=5,n.rating2=2,n.isReadonly=!0,n.rateFunction=function(e){},n.$watch("news.comments",function(e,t){var r=[];if(e)for(var o=_.keys(e),i=0;i<o.length;i++){var a=o[i],s=e[a];s.$id=a,r.push(s)}n.comments=r}),n.removeComment=function(e){t.removeComment(n.news.$id,e).then(function(e){})}}}}])}(),function(){angular.module("article").directive("svHomepageBlogs",["BlogsServ","$sce",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-homepage-blogs.html",scope:{},link:function(n,r,o){e.getRandomBlogs().then(function(e){n.blogs=e}),n.safeParsing=function(e){return t.trustAsHtml(e)}}}}])}(),function(){angular.module("article").directive("svBlogsList",["FbGenServ","$sce","url","userAuth","$stateParams",function(e,t,n,r,o){return{replace:!0,templateUrl:"scripts/article/directives/sv-blogs-list.html",scope:{},link:function(i,a,s){var c=o.id?o.id:r.profile.$id;e.getAssync(n+"blogs",function(e){return _.filter(e,function(e){return!e.endorsements&&e.brokerId==c})}).then(function(e){i.loaded=!0,i.blogs=e}),i.safeParsing=function(e){return t.trustAsHtml(e)}}}}])}(),function(){angular.module("article").filter("articleBlogFr",function(){return function(e,t){var n=1==t;return _.filter(e,function(e){return e.isBlog===n})}})}(),function(){angular.module("article").filter("authorFr",["userAuth",function(e){return function(t,n){return t?(n||(n=e.key),_.filter(t,function(e){return e.authorKey===n})):t}}])}(),function(){angular.module("article").filter("length",function(){function e(e,t){return e?(t=t||100,e.length<=t?e:e.substr(0,t)):void 0}return e})}(),function(){angular.module("article").filter("authorNameFr",function(){return function(e){return e&&_.isString(e)?_.map(e.split("-"),function(e){return _.capitalize(e)}).join(" "):void 0}})}(),function(){angular.module("article").filter("cut",["str",function(e){return function(t,n,r){if(!t)return"";if(n=parseInt(n,10),!n)return t;if(t.length<=n)return t;t=e(t,""),t=t.substr(0,n);var o=t.lastIndexOf(" ");return-1!=o&&(t=t.substr(0,o)),t+(r||" ")}}])}(),function(){angular.module("article").filter("tagsFr",function(){return function(e,t){if(!e||!t)return e;var n=_.filter(e,function(e){var n=e.tags;if(n){if(n=n.trim().toLowerCase(),_.contains(n,","))var r=n.split(",");else r=n.split(" ");var o=_.map(r,function(e){return e.toLowerCase().trim()}),i=_.intersection(o,t);return i.length>0}});return _.take(n,3)}})}(),function(){angular.module("article").filter("urlDecoderFr",function(){return function(e){return e?e.replace(/&#34;/g,'"'):void 0}})}(),function(){angular.module("article").filter("articlePublic",function(){return function(e){return _.filter(e,function(e){return e.isPublic})}})}(),function(){angular.module("article").factory("SvHtmlValidatorServ",["$q","$sanitize","url","users","$firebaseObject","$firebaseArray","$sce",function(e,t,n,r,o,i,a){return{validate:function(e){var n=!1;try{t(e);n=!0}catch(r){}return n},cleanArticle:function(e){return _.forOwn(e,function(n,r){if(_.isString(n)){var o=t(n);o=o.replace(/&#65533;/g,""),o=_.unescape(o),e[r]=o}}),e}}}])}(),function(){angular.module("article").factory("ImageSearchServ",["$q","$http","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o,i){function a(e){e=e.replace(/[.,-\/#!$%\^&\*;:{}=\-_`~()]/g,"");var t=_.filter(e.split(" "),function(e){return e.length>s}),n=[],r=t.length-c;if(0>=r)return[t.join(" ")];for(var o=0;o<t.length-c;o++){for(var i=t[o],a=1;c>a;a++){var u=t[o+a];i+=" "+u}n.push(i)}return n}var n="https://ajax.googleapis.com/ajax/services/search/images?v=1.0&callback=JSON_CALLBACK&tbs=sur:f",s=3,c=4;return{fetch:function(r){var o=a(r),i=o.map(function(e){var r=n+"&q="+encodeURI(e);return t.jsonp(r)});return e.all(i)}}}])}(),function(){angular.module("article").factory("NewsTimeSelectorServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,o){return{select:function(e){var t=e;return t}}}])}(),function(){angular.module("article").factory("ArticlesServ",["NewsTimeSelectorServ","appNews","$q","url","users","$firebaseObject","$firebaseArray","userAuth",function(e,t,n,r,o,i,a,s){function c(n){var r=e.select(n),o=_.where(r,{isPublic:!0,isBlog:!1});t["public"]=_.sortBy(o,"newsOrder")}function u(e){var t=$("<div></div>").append(e.body),n=t.find("img");if(n.length>0){var r=n[0];e.img=r.src}return e}function l(){return n(function(t,n){m.$loaded(function(){0===m.length&&t(1);var n=e.select(m),r=_.where(n,{isPublic:!0});if(0===r.length)t(1);else{var o=_.pluck(r,"newsOrder"),i=_.min(o);t(i-1)}t(r)})})}var f=new Firebase(r+"blogs"),m=a(f);return{setHomeNewsLive:function(){return n(function(e,t){m.$loaded(function(){c(m),m.$watch(function(){c(m)}),e()})})},all:function(){return m},allPublic:function(){return n(function(e,t){m.$loaded().then(function(){var t=_.filter(m,function(e){return e.isPublic});e(t)})})},get:function(e){return i(f.child(e))},remove:function(e){return n(function(t,n){i(f.child(e)).$remove().then(function(){t()})})},getStatus:function(e,t){return n(function(n,r){var o=i(f.child(e).child(t));o.$loaded().then(function(){n(o.$value)})})},allObjRef:function(){return refObj},changeRank:function(e){return n(function(t,n){m.$loaded().then(function(){for(var n=0;n<e.length;n++){var r=e[n],o=_.find(m,{$id:r.$id});o.newsOrder=n+1,m.$save(o)}t()})})},computeNewsOrder:function(e){var t=this;return n(function(n,r){var o=i(f.child(e));o.$loaded(function(){o.isPublic?(o.isPublic=!1,o.$save().then(function(){var e=i(o.$ref().child("newsOrder"));e.$remove().then(function(){t.setHomeNewsLive().then(function(){n()})})})):l().then(function(e){o.newsOrder=e,o.isPublic=!0,o.$save().then(function(){t.setHomeNewsLive().then(function(){n()})})})})})},add:function(e,t){return e.isPublic=e.isPublic||t,e.timestamp=moment().format("x"),e.authorKey=s.key,e.brokerId=s.profile.brokerId,e.brokerPic=s.profile.brokerPic,console.log(s.profile),e=u(e),n(function(t,n){if(e.$id){
var r=f.child(e.$id),o=i(r);o.$loaded().then(function(){o=e,o.$save().then(function(e){o.fbkey=e.key(),o.$save().then(function(){t(o)})})})}else m.$add(e).then(function(e){var n=e.key(),r=e,o=i(r);o.$loaded().then(function(){o.fbkey=n,o.$save().then(function(e){t(o)})})},function(e){n(e)})})}}}])}(),function(){angular.module("article").factory("BlogServ",["$q","url","users","$firebaseObject","$firebaseArray","lastEditorPost",function(e,t,n,r,o,i){function a(t){return e(function(e,n){var o=_.where(t,{isBlog:!0,isPublic:!0});if(o.length){var a=_.last(o),c=r(s.child(a.$id));c.$loaded(function(){i.post=c,e()})}else e()})}var s=new Firebase(t+"articles"),c=o(s);return{setLastBlogLive:function(){return e(function(e,t){c.$loaded(function(){c.$watch(function(){a(c).then(function(){})}),a(c).then(function(){e()})})})},getPost:function(e){var t=r(s.child(e));return t}}}])}(),function(){angular.module("article").factory("BlogsServ",["$q","url","users","$firebaseObject","$firebaseArray","blogsConst",function(e,t,n,r,o,i){function a(e){var t=_.where(e,{isPublic:!0,isBlog:!0});i["public"]=_.sortBy(t,"-timestamp")}var s=new Firebase(t+"blogs"),c=o(s);return{setBlogsLive:function(){return e(function(e,t){c.$loaded(function(){a(c),c.$watch(function(){a(c)}),e()})})},getRandomBlogs:function(){var n=new Firebase(t+"blogs"),r=o(n);return e(function(e,t){r.$loaded(function(){r=_.filter(r,function(e){return!e.endorsements}),e(_.take(_.shuffle(r),4))})})}}}])}(),function(){angular.module("sections.privacy",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.privacy",{url:"/privacy-policy",controller:"PrivacyCtrl",templateUrl:"scripts/sections/privacy/views/privacyCtrl.html"})}])}(),function(){angular.module("sections.privacy").directive("svPrivacy",function(){return{replace:!0,templateUrl:"scripts/sections/privacy/directives/sv-privacy.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("sections.privacy").controller("PrivacyCtrl",["$scope","companyName",function(e,t){e.companyName=t}])}(),function(){angular.module("sections.terms",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.terms",{url:"/terms-of-use",controller:"TermsOfUseCtrl",templateUrl:"scripts/sections/terms/views/terms-of-useCtrl.html"})}])}(),function(){angular.module("sections.terms").directive("svTerms",function(){return{replace:!0,templateUrl:"scripts/sections/terms/directives/sv-terms.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("sections.terms").controller("TermsOfUseCtrl",["$scope","companyName",function(e,t){e.companyName=t}])}(),function(){angular.module("sections.about",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.about",{url:"/about-remax-1st-class",controller:"AboutCtrl",templateUrl:"scripts/sections/about/views/aboutCtrl.html"})}])}(),function(){angular.module("sections.about").controller("AboutCtrl",["$scope",function(e){}])}(),function(){angular.module("sections.about").directive("svAboutCompany",function(){return{replace:!0,templateUrl:"scripts/sections/about/directives/sv-about-company.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("sections.contact",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.contact",{url:"/contact",controller:"ContactCtrl",templateUrl:"scripts/sections/contact/views/contactCtrl.html"}).state("app.get-svoboda-news",{url:"/get-svoboda-news",controller:"GetSvobodaNewsCtrl",templateUrl:"scripts/sections/contact/views/get-svoboda-newsCtrl.html"})}])}(),function(){angular.module("sections.contact").directive("svContactUsForm",function(){return{replace:!0,templateUrl:"scripts/sections/contact/directives/sv-contact-us-form.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("sections.contact").directive("svContactAddress",["companyName","companyStreetAddress","companyCity","companyState","companyZip","companyPhone","companyFax","companyEmail",function(e,t,n,r,o,i,a,s){return{replace:!0,templateUrl:"scripts/sections/contact/directives/sv-contact-address.html",scope:{},link:function(c,u,l){c.companyName=e,c.companyStreet=t,c.companyCity=n,c.companyState=r,c.companyZip=o,c.companyPhone=i,c.companyFax=a,c.companyEmail=s}}}])}(),function(){angular.module("sections.contact").controller("ContactCtrl",["$scope","$mdDialog","companyName","companyStreetAddress","companyCity","companyState","companyZip","companyPhone","companyFax","companyEmail",function(e,t,n,r,o,i,a,s,c,u){function l(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}e.companyName=n,e.companyStreet=r,e.companyCity=o,e.companyState=i,e.companyZip=a,e.companyPhone=s,e.companyFax=c,e.companyEmail=u,e.showContactMapModal=function(){t.show({controller:l,templateUrl:"scripts/sections/demographics/views/modalContactUsMap.html"})},l.$inject=["$scope","$mdDialog"]}])}(),function(){angular.module("sections.header",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){angular.module("sections.header").directive("svSocialTopNav",function(){return{replace:!0,templateUrl:"scripts/sections/header/directives/sv-social-top-nav.html",scope:{},link:function(e,t,n){}}})}(),function(){angular.module("sections.header").directive("svSocialTopNavCell",["$mdBottomSheet","$mdSidenav",function(e,t){return{replace:!0,templateUrl:"scripts/sections/header/directives/sv-social-top-nav-cell.html",scope:{},controller:["$scope","$timeout",function(n,r){n.alert="",n.showListBottomSheet=function(t){n.alert="",e.show({templateUrl:"scripts/common/templates/social-top-nav-cell.html",targetEvent:t}).then(function(e){n.alert=e.name+" clicked!"})},n.listItemClick=function(t){var r=n.items[t];e.hide(r)},n.closeSideBar=function(e){var r=n.items[e];t("left").hide(r),t("right").hide(r)}}]}}])}(),function(){angular.module("sections.home").controller("HomeCtrl",["$scope","userAuth",function(e,t){e.user=t.profile}])}(),function(){angular.module("sections.home").controller("AppCtrl",["$sce","AgentServ","NotificationsServ","userAuth","appNews","$timeout","$mdSidenav","$mdMedia","$state","$scope","$rootScope","toastr",function(e,t,n,r,o,i,a,s,c,u,l,f){l.frameUrl=e.trustAsResourceUrl("http://localhost"),l.user=r.profile,l.news=o["public"],l.$on("homeNewsChanged",function(){l.news=o["public"]});var m=c.current;"/"===m.url?l.homeStyle=!0:l.homeStyle=!1,l.$on("$stateChangeSuccess",function(e,t,n,r,o,i){var a=t.name;_.contains("app.home",a)?l.homeStyle=!0:l.homeStyle=!1}),l.$on("$stateChangeError",function(e,t,n,r,o,i){f.warning(i)}),l.$on("error",function(){f.error("error")}),u.$on("image-search-show",function(){u.imageSearch=!0}),u.$on("image-search-hide",function(){u.imageSearch=!1}),l.toggleRight=function(){a("right").toggle()},l.toggleLeft=function(){a("left").toggle()},l.$watch("appLoaded",function(e){u.appLoaded=e}),u.$watch(function(){return s("gt-lg")},function(e){e?u.showShifter=!t.isIe():u.showShifter=!0})}])}(),function(){angular.module("sections.home").directive("svMainSectionsNav",["$mdSidenav",function(e){return{replace:!0,templateUrl:"scripts/sections/home/directives/sv-main-sections-nav.html",link:function(t,n,r){t.closeSideBar=function(){e("left").close(),e("right").close()}}}}])}();